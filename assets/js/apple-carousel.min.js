var w=(n,a)=>()=>(a||n((a={exports:{}}).exports,a),a.exports);var E=w(()=>{(function(){"use strict";let n={root:"[data-apple-carousel]",viewport:"[data-apple-carousel-viewport]",track:"[data-apple-carousel-track]",slide:"[data-apple-carousel-slide]",dots:"[data-apple-carousel-dots]",prev:"[data-apple-carousel-prev]",next:"[data-apple-carousel-next]"},a=(i,t,e)=>Math.max(t,Math.min(e,i)),l=()=>{try{return window.matchMedia&&window.matchMedia("(prefers-reduced-motion: reduce)").matches}catch(i){return!1}},p=i=>Math.max(0,Math.round((Number(i)||0)*1e3)),u=i=>{if(!Array.isArray(i)||i.length!==4)return null;let t=i.map(e=>Number(e));return t.some(e=>!Number.isFinite(e))?null:`cubic-bezier(${t.join(",")})`},v=(i,t,{duration:e=.3,ease:s=[.22,1,.36,1]}={})=>{if(!i)return{stop(){}};try{if(typeof i.animate!="function")return i.style.transform=t,{stop(){}};let r=u(s)||"ease",o=i.animate([{transform:i.style.transform||"translateZ(0px) rotateY(0deg) scale(1)"},{transform:t}],{duration:p(e),easing:r,fill:"forwards"});try{o.addEventListener("finish",()=>{try{i.style.transform=t}catch(h){}},{once:!0})}catch(h){}return{stop(){try{o.cancel()}catch(h){}}}}catch(r){try{i.style.transform=t}catch(o){}return{stop(){}}}},f=()=>{try{return window.matchMedia("(min-width: 1024px)").matches&&window.matchMedia("(hover: hover)").matches&&window.matchMedia("(pointer: fine)").matches}catch(i){return window.innerWidth>=1024}};function m(i,t){try{i.scrollIntoView({behavior:t,block:"nearest",inline:"center"})}catch(e){try{let s=i&&i.parentElement;s&&(s.scrollLeft=i.offsetLeft)}catch(s){}}}class y{constructor(t){this.root=t,this.viewport=t.querySelector(n.viewport)||t,this.track=t.querySelector(n.track)||this.viewport,this.slides=Array.from(t.querySelectorAll(n.slide)),this.dotsEl=t.querySelector(n.dots),this.prevBtn=t.querySelector(n.prev),this.nextBtn=t.querySelector(n.next),this.activeIndex=0,this.reducedMotion=l(),this._onKeyDown=this._onKeyDown.bind(this),this._onResize=this._onResize.bind(this),this._onScroll=this._onScroll.bind(this),this._observer=null,this._dots=[],this._depthAnims=new Map,this.init()}init(){if(this.slides.length){if(this.root&&this.root.dataset){if(this.root.dataset.appleCarouselInit==="1")return;this.root.dataset.appleCarouselInit="1"}this._buildDots(),this._bindNav(),this._bindKeys(),this._bindObserver();try{this.viewport.addEventListener("scroll",this._onScroll,{passive:!0})}catch(t){this.viewport.addEventListener("scroll",this._onScroll)}try{window.addEventListener("resize",this._onResize,{passive:!0})}catch(t){window.addEventListener("resize",this._onResize)}this._setActive(0,{applyDepth:!0})}}destroy(){try{this.viewport.removeEventListener("scroll",this._onScroll)}catch(t){}try{window.removeEventListener("resize",this._onResize)}catch(t){}try{this.root.removeEventListener("keydown",this._onKeyDown)}catch(t){}if(this._observer){try{this._observer.disconnect()}catch(t){}this._observer=null}this._depthAnims.forEach(t=>{try{t.stop()}catch(e){}}),this._depthAnims.clear()}_buildDots(){if(this.dotsEl){try{this.dotsEl.innerHTML=""}catch(t){for(;this.dotsEl.firstChild;)this.dotsEl.removeChild(this.dotsEl.firstChild)}this._dots=this.slides.map((t,e)=>{let s=document.createElement("button");return s.type="button",s.className="apple-carousel__dot",s.setAttribute("aria-label",`Go to project ${e+1}`),s.addEventListener("click",()=>this.goTo(e,{behavior:"smooth"})),this.dotsEl.appendChild(s),s})}}_bindNav(){this.prevBtn&&this.prevBtn.addEventListener("click",t=>{t.preventDefault(),this.goTo(this.activeIndex-1,{behavior:"smooth"})}),this.nextBtn&&this.nextBtn.addEventListener("click",t=>{t.preventDefault(),this.goTo(this.activeIndex+1,{behavior:"smooth"})})}_bindKeys(){this.viewport.hasAttribute("tabindex")||this.viewport.setAttribute("tabindex","0"),this.root.addEventListener("keydown",this._onKeyDown)}_bindObserver(){"IntersectionObserver"in window&&(this._observer=new IntersectionObserver(t=>{let e=null;for(let r of t)r.isIntersecting&&(!e||r.intersectionRatio>e.intersectionRatio)&&(e=r);if(!e)return;let s=this.slides.indexOf(e.target);s>=0&&s!==this.activeIndex&&this._setActive(s,{applyDepth:!0})},{root:this.viewport,threshold:[.5,.6,.7,.8]}),this.slides.forEach(t=>{try{this._observer.observe(t)}catch(e){}}))}_onScroll(){}_onResize(){clearTimeout(this._rt),this._rt=setTimeout(()=>{this._applyDepth()},120)}_onKeyDown(t){if(!t)return;let e=t.key;e==="ArrowLeft"?(t.preventDefault(),this.goTo(this.activeIndex-1,{behavior:"smooth"})):e==="ArrowRight"?(t.preventDefault(),this.goTo(this.activeIndex+1,{behavior:"smooth"})):e==="Home"?(t.preventDefault(),this.goTo(0,{behavior:"smooth"})):e==="End"&&(t.preventDefault(),this.goTo(this.slides.length-1,{behavior:"smooth"}))}goTo(t,{behavior:e}={}){let s=a(Number(t)||0,0,this.slides.length-1),r=this.slides[s];if(!r)return;let h=this.reducedMotion?"auto":e||"smooth";m(r,h),this._setActive(s,{applyDepth:!0})}_setActive(t,{applyDepth:e}={}){this.activeIndex=a(Number(t)||0,0,this.slides.length-1),this.slides.forEach((s,r)=>{try{s.dataset.appleCarouselActive=r===this.activeIndex?"1":"0"}catch(o){}}),this._dots.length&&this._dots.forEach((s,r)=>{let o=r===this.activeIndex;s.classList.toggle("is-active",o);try{s.setAttribute("aria-current",o?"true":"false"),s.setAttribute("aria-selected",o?"true":"false")}catch(h){}}),this.prevBtn&&(this.prevBtn.disabled=this.activeIndex<=0),this.nextBtn&&(this.nextBtn.disabled=this.activeIndex>=this.slides.length-1),e&&this._applyDepth()}_applyDepth(){let t=!this.reducedMotion&&f();this.root.classList.toggle("is-depth",t),this.slides.forEach((e,s)=>{let r=s-this.activeIndex,o=Math.abs(r),h=t?{transform:`translateZ(${Math.max(0,90-o*55)}px) rotateY(${a(r*-14,-28,28)}deg) scale(${a(1-o*.06,.84,1)})`}:{transform:"translateZ(0px) rotateY(0deg) scale(1)"},d=this._depthAnims.get(e);if(d)try{d.stop()}catch(_){}if(this.reducedMotion){try{e.style.transform=h.transform}catch(_){}return}let b=v(e,h.transform,{duration:t?.45:.2,ease:[.22,1,.36,1]});this._depthAnims.set(e,b)})}}function c(){let i=Array.from(document.querySelectorAll(n.root));i.length&&i.forEach(t=>{try{new y(t)}catch(e){}})}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",c):c()})()});export default E();
