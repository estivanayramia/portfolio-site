(function(){"use strict";const d=[],g=window.__collectedLogs||[];let b=!1,u="summary",j=!0;function A(t,n){const e={timestamp:Date.now(),type:t,data:n};d.push(e),d.length>1e3&&d.shift(),i()}function f(){const t=document.createElement("div");t.id="debugger-hud",t.innerHTML=`
      <style>
        #debugger-hud {
          --dbg-bg: rgba(33, 40, 66, 0.98);
          --dbg-text: #e1d4c2;
          --dbg-border: rgba(225, 212, 194, 0.1);
          --dbg-accent: #4a90e2;
          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
          font-size: 13px;
          color: var(--dbg-text);
          position: fixed;
          z-index: 999999;
          isolation: isolate;
        }
        
        #debugger-hud.collapsed {
          bottom: 20px;
          right: 20px;
          bottom: calc(20px + env(safe-area-inset-bottom, 0px));
          right: calc(20px + env(safe-area-inset-right, 0px));
        }
        
        #debugger-hud.expanded {
          bottom: 0;
          right: 0;
          top: auto;
          left: 0;
          display: flex;
          flex-direction: column;
        }
        
        @media (min-width: 768px) {
          #debugger-hud.expanded {
            left: auto;
            width: 400px;
            top: 0;
            bottom: 0;
          }
        }
        
        .dbg-pill {
          background: var(--dbg-bg);
          backdrop-filter: blur(10px);
          border: 1px solid var(--dbg-border);
          border-radius: 24px;
          padding: 12px 20px;
          cursor: pointer;
          user-select: none;
          box-shadow: 0 4px 20px rgba(0,0,0,0.3);
          display: flex;
          align-items: center;
          gap: 8px;
          min-width: 44px;
          min-height: 44px;
          touch-action: manipulation;
        }
        
        .dbg-pill:active {
          transform: scale(0.98);
        }
        
        .dbg-panel {
          background: var(--dbg-bg);
          backdrop-filter: blur(10px);
          border: 1px solid var(--dbg-border);
          border-radius: 16px 16px 0 0;
          display: flex;
          flex-direction: column;
          height: 60vh;
          max-height: calc(100vh - 60px);
          padding-bottom: env(safe-area-inset-bottom, 0px);
          box-shadow: 0 -4px 30px rgba(0,0,0,0.4);
        }
        
        @media (min-width: 768px) {
          .dbg-panel {
            border-radius: 0;
            height: 100%;
            max-height: 100vh;
          }
        }
        
        .dbg-header {
          display: flex;
          justify-content: space-between;
          align-items: center;
          padding: 16px;
          border-bottom: 1px solid var(--dbg-border);
          cursor: move;
          user-select: none;
        }
        
        .dbg-title {
          font-weight: 600;
          font-size: 14px;
        }
        
        .dbg-close {
          background: none;
          border: none;
          color: var(--dbg-text);
          font-size: 24px;
          line-height: 1;
          cursor: pointer;
          padding: 0;
          min-width: 44px;
          min-height: 44px;
          display: flex;
          align-items: center;
          justify-content: center;
        }
        
        .dbg-tabs {
          display: flex;
          gap: 4px;
          padding: 8px;
          border-bottom: 1px solid var(--dbg-border);
          overflow-x: auto;
          scrollbar-width: thin;
        }
        
        .dbg-tab {
          background: transparent;
          border: none;
          color: var(--dbg-text);
          opacity: 0.6;
          padding: 8px 12px;
          border-radius: 6px;
          cursor: pointer;
          white-space: nowrap;
          font-size: 12px;
          min-width: 44px;
          min-height: 44px;
          display: flex;
          align-items: center;
          justify-content: center;
        }
        
        .dbg-tab.active {
          opacity: 1;
          background: rgba(74, 144, 226, 0.2);
          color: var(--dbg-accent);
        }
        
        .dbg-content {
          flex: 1;
          overflow-y: auto;
          padding: 12px;
        }
        
        .dbg-actions {
          display: flex;
          gap: 8px;
          padding: 12px;
          border-top: 1px solid var(--dbg-border);
          flex-wrap: wrap;
        }
        
        .dbg-btn {
          background: var(--dbg-accent);
          color: white;
          border: none;
          border-radius: 6px;
          padding: 8px 16px;
          cursor: pointer;
          font-size: 12px;
          min-width: 44px;
          min-height: 44px;
        }
        
        .dbg-btn:active {
          transform: scale(0.98);
        }
        
        .dbg-log-entry {
          padding: 8px;
          border-bottom: 1px solid var(--dbg-border);
          font-family: 'Courier New', monospace;
          font-size: 11px;
        }
        
        .dbg-log-entry.error {
          background: rgba(244, 67, 54, 0.1);
        }
        
        .dbg-log-entry.warn {
          background: rgba(255, 152, 0, 0.1);
        }
        
        .dbg-table {
          width: 100%;
          border-collapse: collapse;
          font-size: 11px;
        }
        
        .dbg-table th {
          background: rgba(255,255,255,0.05);
          padding: 8px 4px;
          text-align: left;
          border-bottom: 1px solid var(--dbg-border);
        }
        
        .dbg-table td {
          padding: 6px 4px;
          border-bottom: 1px solid rgba(225,212,194,0.05);
        }
        
        .dbg-stat {
          display: flex;
          justify-content: space-between;
          padding: 8px 0;
          border-bottom: 1px solid rgba(225,212,194,0.05);
        }
        
        .dbg-stat-label {
          opacity: 0.7;
        }
        
        .dbg-stat-value {
          font-weight: 600;
        }
      </style>
      
      <div class="dbg-pill">
        <span>\u{1F41B}</span>
        <span>DBG</span>
      </div>
      
      <div class="dbg-panel" style="display:none;">
        <div class="dbg-header">
          <div class="dbg-title">Debugger</div>
          <button class="dbg-close" aria-label="Close debugger">&times;</button>
        </div>
        
        <div class="dbg-tabs">
          <button class="dbg-tab active" data-tab="summary">Summary</button>
          <button class="dbg-tab" data-tab="console">Console</button>
          <button class="dbg-tab" data-tab="network">Network</button>
          <button class="dbg-tab" data-tab="performance">Performance</button>
          <button class="dbg-tab" data-tab="layout">Layout</button>
          <button class="dbg-tab" data-tab="storage">Storage/PWA</button>
        </div>
        
        <div class="dbg-content"></div>
        
        <div class="dbg-actions">
          <button class="dbg-btn" id="dbg-export">Export JSON</button>
          <button class="dbg-btn" id="dbg-copy">Copy</button>
          <button class="dbg-btn" id="dbg-clear">Clear</button>
        </div>
      </div>
    `,document.body.appendChild(t),x(),i()}function x(){const t=document.querySelector(".dbg-pill"),n=document.querySelector(".dbg-panel"),e=document.querySelector(".dbg-close"),o=document.querySelectorAll(".dbg-tab");t.addEventListener("click",r),e.addEventListener("click",r),o.forEach(a=>{a.addEventListener("click",()=>{u=a.dataset.tab,o.forEach(s=>s.classList.remove("active")),a.classList.add("active"),i()})}),document.getElementById("dbg-export").addEventListener("click",$),document.getElementById("dbg-copy").addEventListener("click",T),document.getElementById("dbg-clear").addEventListener("click",D)}function r(){b=!b;const t=document.getElementById("debugger-hud"),n=document.querySelector(".dbg-pill"),e=document.querySelector(".dbg-panel");b?(t.classList.add("expanded"),t.classList.remove("collapsed"),n.style.display="none",e.style.display="flex"):(t.classList.remove("expanded"),t.classList.add("collapsed"),n.style.display="flex",e.style.display="none"),i()}function i(){const t=document.querySelector(".dbg-content");if(!t)return;const n=[...g,...d];switch(u){case"summary":t.innerHTML=y(n);break;case"console":t.innerHTML=v(n);break;case"network":t.innerHTML=w(n);break;case"performance":t.innerHTML=L(n);break;case"layout":t.innerHTML=k();break;case"storage":t.innerHTML=S(n);break}}function y(t){const n=t.filter(o=>o.msg&&o.msg.includes("error")).length,e=t.filter(o=>o.msg&&o.msg.includes("fetch.error")).length;return`
      <div class="dbg-stat"><span class="dbg-stat-label">URL</span><span class="dbg-stat-value">${location.href}</span></div>
      <div class="dbg-stat"><span class="dbg-stat-label">Viewport</span><span class="dbg-stat-value">${window.innerWidth}x${window.innerHeight}</span></div>
      <div class="dbg-stat"><span class="dbg-stat-label">DPR</span><span class="dbg-stat-value">${window.devicePixelRatio}</span></div>
      <div class="dbg-stat"><span class="dbg-stat-label">User Agent</span><span class="dbg-stat-value">${navigator.userAgent.slice(0,80)}...</span></div>
      <div class="dbg-stat"><span class="dbg-stat-label">Errors</span><span class="dbg-stat-value">${n}</span></div>
      <div class="dbg-stat"><span class="dbg-stat-label">Network Errors</span><span class="dbg-stat-value">${e}</span></div>
      <div class="dbg-stat"><span class="dbg-stat-label">Events Logged</span><span class="dbg-stat-value">${t.length}</span></div>
    `}function v(t){const n=t.filter(e=>e.msg&&e.msg.startsWith("console."));return n.length?n.map(e=>{const o=e.msg.split(".")[1]||"log",a=e.data&&e.data.args?e.data.args.join(" "):"";return`<div class="dbg-log-entry ${o}">[${new Date(e.t).toLocaleTimeString()}] ${a}</div>`}).join(""):"<p>No console logs</p>"}function w(t){const n=t.filter(e=>e.msg&&(e.msg.includes("fetch")||e.msg.includes("xhr")));return n.length?`<table class="dbg-table">
      <thead><tr><th>Time</th><th>Method</th><th>URL</th><th>Status</th></tr></thead>
      <tbody>${n.map(e=>{const o=e.data&&e.data.url?e.data.url:"",a=e.data&&e.data.method?e.data.method:"GET",s=e.data&&e.data.status?e.data.status:"-";return`<tr><td>${new Date(e.t).toLocaleTimeString()}</td><td>${a}</td><td>${o.slice(0,50)}</td><td>${s}</td></tr>`}).join("")}</tbody>
    </table>`:"<p>No network activity</p>"}function L(t){const n=t.filter(e=>e.msg&&e.msg.startsWith("perf."));return`<p>Performance entries: ${n.length}</p>`+n.slice(0,20).map(e=>`<div class="dbg-log-entry">${e.msg}: ${JSON.stringify(e.data)}</div>`).join("")}function k(){const t=[];document.querySelectorAll("img").forEach(a=>{a.alt||t.push({type:"error",msg:"Missing ALT text",el:a}),a.loading!=="lazy"&&E(a)||a.loading!=="lazy"&&t.push({type:"warn",msg:'Missing loading="lazy"',el:a})}),document.querySelectorAll("a").forEach(a=>{(!a.href||a.href==="#"||a.getAttribute("href").startsWith("javascript"))&&t.push({type:"warn",msg:"Empty/Invalid Link",el:a});const s=a.getBoundingClientRect();s.width>0&&(s.width<44||s.height<44)&&t.push({type:"warn",msg:"Small Touch Target (<44px)",el:a})});const n=document.documentElement.clientWidth;document.querySelectorAll("*").forEach(a=>{a.offsetWidth>n&&t.push({type:"error",msg:"Horizontal Overflow",el:a})});const e=Array.from(document.querySelectorAll("h1, h2, h3, h4, h5, h6"));let o=0;return e.forEach(a=>{const s=parseInt(a.tagName[1]);s>o+1&&t.push({type:"warn",msg:`Skipped heading level (H${o} -> H${s})`,el:a}),o=s}),t.length===0?"<p>\u2705 No layout issues found!</p>":(window.dbgHighlight=a=>{const s=window.dbgIssues[a];if(s&&s.el){s.el.scrollIntoView({behavior:"smooth",block:"center"});const I=s.el.style.outline;s.el.style.outline="4px solid #ff00ff",s.el.style.zIndex=999999,setTimeout(()=>s.el.style.outline=I,2e3)}},window.dbgIssues=t,`
      <div class="dbg-stat"><span class="dbg-stat-label">Issues Found</span><span class="dbg-stat-value">${t.length}</span></div>
      <table class="dbg-table">
        <thead><tr><th>Type</th><th>Issue</th><th>Element</th><th>Action</th></tr></thead>
        <tbody>
          ${t.map((a,s)=>`
            <tr>
              <td><span style="color:${a.type==="error"?"#ff5555":"#ffaa00"}">\u25CF</span> ${a.type}</td>
              <td>${a.msg}</td>
              <td>${a.el.tagName.toLowerCase()}${a.el.id?"#"+a.el.id:""}.${Array.from(a.el.classList).slice(0,1).join(".")}</td>
              <td><button class="dbg-btn" style="padding:2px 8px;min-height:24px;" onclick="window.dbgHighlight(${s})">Find</button></td>
            </tr>
          `).join("")}
        </tbody>
      </table>
    `)}function E(t){const n=t.getBoundingClientRect();return n.top<window.innerHeight&&n.bottom>=0}function S(t){return t.filter(e=>e.msg&&(e.msg.includes("Storage")||e.msg.includes("sw."))).map(e=>`<div class="dbg-log-entry">${e.msg}: ${JSON.stringify(e.data)}</div>`).join("")||"<p>No storage activity</p>"}function $(){const t={version:"1.0.0",timestamp:Date.now(),url:location.href,logs:[...g,...d]},n=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),e=URL.createObjectURL(n),o=document.createElement("a");o.href=e,o.download=`debugger-${Date.now()}.json`,o.click(),URL.revokeObjectURL(e)}function T(){const t=JSON.stringify([...g,...d],null,2);navigator.clipboard.writeText(t).then(()=>{alert("Copied to clipboard")}).catch(()=>{alert("Copy failed")})}function D(){d.length=0,i()}let l=[],c=0,p=null;document.addEventListener("touchstart",t=>{if(t.touches.length===3){const n=Date.now();l.push(n),setTimeout(()=>{l.length>=3&&Date.now()-l[0]>=600&&(r(),l=[])},600)}}),document.addEventListener("touchend",()=>{l=[]});const h=document.querySelector('a[href="/"]');h&&h.addEventListener("click",t=>{c++,p&&clearTimeout(p),p=setTimeout(()=>{c=0},500),c===3&&(t.preventDefault(),r(),c=0)}),document.addEventListener("keydown",t=>{t.altKey&&t.shiftKey&&t.key==="D"&&(t.preventDefault(),r())});function m(){console.log("[Debugger] Initializing HUD..."),f(),document.getElementById("debugger-hud").classList.add("collapsed"),console.log("[Debugger] HUD ready. Press Alt+Shift+D to toggle.")}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",m):m()})();
