console.log("[Savonie DEBUG] site.js loaded");/**
 * ============================================================================
 * PORTFOLIO SITE - MAIN JAVASCRIPT
 * ============================================================================
 * 
 * Purpose: Core functionality for the portfolio website including:
 * - Mobile-optimized navigation and scroll handling
 * - Dark/light theme management with system preference detection
 * - GSAP animations with ScrollTrigger
 * - Progressive PDF preview loading with graceful fallbacks
 * - Savonie AI chatbot integration
 * - Client-side diagnostics (opt-in with ?collect-logs=1)
 * - PWA support with service worker
 * - Achievement system
 * - Custom analytics event tracking (theme changes, scroll depth, interactions)
 * 
 * Architecture Overview:
 * 1. Core Utilities (user interaction tracking, guarded reload)
 * 2. Instrumentation Module (diagnostic logging, gated by URL param)
 * 3. Feature Modules (theme, animations, PDFs, chat, etc.)
 * 4. Analytics Integration (custom events sent to GA4 & Clarity)
 * 5. Initialization & Startup
 * 
 * Analytics Integration:
 * ----------------------
 * Analytics initialization is handled by lazy-loader.js (loaded via defer).
 * This file sends CUSTOM EVENTS to the analytics services after they're loaded.
 * 
 * Services used:
 * - Google Analytics 4 (GA4): G-MCN4RXCY6Q
 * - Microsoft Clarity: uawk2g8xee
 * 
 * How it works:
 * 1. lazy-loader.js loads analytics on first user interaction (scroll, click, etc.)
 * 2. This file checks if analytics are loaded before sending events
 * 3. Custom events: theme toggle, scroll depth, navigation clicks, form submissions
 * 4. All analytics code is defensive (checks typeof before calling)
 * 
 * To verify analytics:
 * - GA4: https://analytics.google.com → Realtime → Events
 * - Clarity: https://clarity.microsoft.com → Dashboard → Recordings
 * 
 * @version 2.1.0
 * @author Estivan Ayramia
 * @license MIT
 */let __userInteracting=!1,__userInteractingTimer=null;const __markUserInteraction=()=>{__userInteracting=!0,__userInteractingTimer&&clearTimeout(__userInteractingTimer),__userInteractingTimer=setTimeout(()=>{__userInteracting=!1},1e3)};["touchstart","touchmove","wheel","scroll"].forEach(r=>{try{window.addEventListener(r,__markUserInteraction,{passive:!0})}catch{window.addEventListener(r,__markUserInteraction)}});const __initDeferredStylesheets=()=>{try{document.querySelectorAll('link[rel="stylesheet"][media="print"][data-media]').forEach(i=>{const o=i.getAttribute("data-media")||"all",n=()=>{try{i.media=o}catch{}};try{i.addEventListener("load",n,{once:!0})}catch{i.addEventListener("load",n)}try{i.addEventListener("error",n,{once:!0})}catch{i.addEventListener("error",n)}setTimeout(()=>{try{i.sheet&&n()}catch{}},0)})}catch{}};__initDeferredStylesheets();const __initPreloadStylesheets=()=>{try{document.querySelectorAll('link[rel="preload"][as="style"][data-onload-rel]').forEach(i=>{const o=i.getAttribute("data-onload-rel")||"stylesheet",n=()=>{try{i.rel=o,i.removeAttribute("data-onload-rel")}catch{}};try{i.addEventListener("load",n,{once:!0})}catch{i.addEventListener("load",n)}try{if(typeof performance<"u"&&typeof performance.getEntriesByName=="function"){const t=i.href,e=t?performance.getEntriesByName(t):[];if(e&&e.length){const s=e[0];s&&typeof s.responseEnd=="number"&&s.responseEnd>0&&n()}}}catch{}})}catch{}};__initPreloadStylesheets();const __initCarouselAndLightbox=()=>{try{const r=document.getElementById("carouselTrack");if(!r||r.dataset&&r.dataset.carouselInit==="1")return;const i=!!(r.dataset&&r.dataset.carouselWrap==="1"),o=Array.from(document.querySelectorAll(".note-card img")),n=o.length>0,t=Array.from(document.querySelectorAll(".carousel-slide"));if(!t.length)return;const e=document.getElementById("carouselPrev"),s=document.getElementById("carouselNext"),c=document.getElementById("carouselDots"),g=document.getElementById("lightbox"),u=document.getElementById("lightbox-image"),T=document.querySelector(".lightbox-close"),I=document.querySelector(".lightbox-prev"),p=document.querySelector(".lightbox-next");if(!e||!s||!c||!g||!u||!T||!I||!p)return;const S=t.map(b=>b.querySelector("img")).filter(Boolean),h=n?o:S;if(!h.length)return;let m=0,_=0;const B=()=>n?window.innerWidth>=1024?5:window.innerWidth>=768?4:window.innerWidth>=640?3:2:window.innerWidth>=768?3:2;let a=B();const z=()=>{try{c.innerHTML=""}catch{for(;c.firstChild;)c.removeChild(c.firstChild)}},J=()=>{try{g.classList.remove("active"),g.setAttribute("aria-hidden","true")}catch{}},R=()=>Math.ceil(t.length/a),O=()=>{try{const b=(t[0]&&t[0].offsetWidth?t[0].offsetWidth:0)+16,D=R();if(n){const F=Math.max(0,t.length-a);m=Math.max(0,Math.min(m,F)),r.style.transform=`translateX(-${m*b}px)`}else m=Math.max(0,Math.min(m,D-1)),r.style.transform=`translateX(-${m*b*a}px)`;Array.from(document.querySelectorAll(".carousel-dot")).forEach((F,q)=>{const w=n?Math.floor(m/a):m;F.classList.toggle("active",q===w)})}catch{}},G=()=>{z();const b=R();for(let D=0;D<b;D++){const F=document.createElement("button");F.className="carousel-dot"+(D===0?" active":"");try{F.setAttribute("aria-label",`Go to page ${D+1}`)}catch{}F.addEventListener("click",()=>{if(n){const q=Math.max(0,t.length-a);m=Math.max(0,Math.min(D*a,q))}else m=i?(D+b)%b:Math.max(0,Math.min(D,b-1));O()}),c.appendChild(F)}O()};e.addEventListener("click",()=>{const b=R();if(n){const D=Math.max(0,t.length-a);i?(m=m-a,m<0&&(m=D)):m=Math.max(0,m-a)}else m=i?(m-1+b)%b:Math.max(0,Math.min(m-1,b-1));O()}),s.addEventListener("click",()=>{const b=R();if(n){const D=Math.max(0,t.length-a);i?(m=m+a,m>D&&(m=0)):m=Math.min(D,m+a)}else m=i?(m+1)%b:Math.max(0,Math.min(m+1,b-1));O()});const V=b=>{const D=h[b];if(D){_=b,u.src=D.src,u.alt=D.alt||"";try{u.style.transform=D.style&&D.style.transform?D.style.transform:""}catch{}if(n){try{I.style.display=b>0?"block":"none"}catch{}try{p.style.display=b<h.length-1?"block":"none"}catch{}}}},$=b=>{V(b),g.classList.add("active"),g.setAttribute("aria-hidden","false")};n?h.forEach((b,D)=>{b.addEventListener("click",()=>$(D))}):t.forEach((b,D)=>{b.addEventListener("click",()=>$(D))}),T.addEventListener("click",J),g.addEventListener("click",b=>{b.target===g&&J()}),I.addEventListener("click",b=>{b&&b.stopPropagation&&b.stopPropagation(),n?_>0&&V(_-1):V((_-1+h.length)%h.length)}),p.addEventListener("click",b=>{b&&b.stopPropagation&&b.stopPropagation(),n?_<h.length-1&&V(_+1):V((_+1)%h.length)}),document.addEventListener("keydown",b=>{g.classList.contains("active")&&(b.key==="Escape"&&J(),b.key==="ArrowLeft"&&I.click(),b.key==="ArrowRight"&&p.click())}),window.addEventListener("resize",()=>{const b=B();b!==a?(a=b,G()):O()});try{r.dataset.carouselInit="1"}catch{}G()}catch{}};document.readyState==="loading"?document.addEventListener("DOMContentLoaded",__initCarouselAndLightbox):__initCarouselAndLightbox();const __collectLogsEnabled=typeof window<"u"&&new URLSearchParams(window.location.search).has("collect-logs"),__collectedLogs=[],__saveCollected=()=>{try{localStorage.setItem("site_collect_logs",JSON.stringify(__collectedLogs.slice(-1e3)))}catch{}},__logCollect=(r,i)=>{if(__collectLogsEnabled)try{const o={t:Date.now(),msg:String(r),data:i||null,scrollY:window.scrollY||0};__collectedLogs.push(o),__saveCollected()}catch{}},__collectLogsParam=typeof window<"u"?new URLSearchParams(window.location.search).get("collect-logs"):null,__collectSnapshots=!!(__collectLogsParam&&/snapshot/i.test(__collectLogsParam)),__maybeTakeSnapshot=(r,i)=>{if(__collectSnapshots)try{const o=document.activeElement,n=e=>{if(!e||!e.getBoundingClientRect)return null;const s=e.getBoundingClientRect();return{tag:e.tagName||null,id:e.id||null,classes:e.className||null,rect:{x:Math.round(s.x),y:Math.round(s.y),w:Math.round(s.width),h:Math.round(s.height),top:Math.round(s.top),left:Math.round(s.left)},focusable:typeof e.tabIndex=="number"?e.tabIndex:null,ariaRole:e.getAttribute&&(e.getAttribute("role")||null)}},t={reason:r||null,ts:Date.now(),scrollY:window.scrollY||0,innerWidth:window.innerWidth||0,innerHeight:window.innerHeight||0,docHeight:document.documentElement.scrollHeight||document.body.scrollHeight||0,target:n(i||document.activeElement)||null,activeElement:n(o)||null};__logCollect("snapshot",t)}catch{}};if(__collectLogsEnabled){let r=null;window.addEventListener("scroll",()=>{r||(r=setTimeout(()=>{__logCollect("scroll",{y:window.scrollY,innerHeight:window.innerHeight,docHeight:document.documentElement.scrollHeight}),r=null},200))},{passive:!0});try{"serviceWorker"in navigator&&navigator.serviceWorker.addEventListener("controllerchange",()=>{__logCollect("controllerchange",{controller:!!navigator.serviceWorker.controller})})}catch{}try{const o=window.location.reload.bind(window.location);window.location.reload=function(){return __logCollect("location.reload called"),o()}}catch{}(()=>{const o=document.createElement("button");o.id="collect-logs-btn",o.textContent="Logs",Object.assign(o.style,{position:"fixed",left:"8px",bottom:"12px",zIndex:99999,padding:"6px 8px",fontSize:"12px",background:"rgba(33,40,66,0.85)",color:"#e1d4c2",border:"1px solid rgba(225,212,194,0.08)",borderRadius:"6px"}),o.addEventListener("click",()=>{try{const n=JSON.stringify(__collectedLogs,null,2),t=new Blob([n],{type:"application/json"}),e=URL.createObjectURL(t),s=document.createElement("a");s.href=e,s.download=`site-logs-${Date.now()}.json`,document.body.appendChild(s),s.click(),s.remove(),URL.revokeObjectURL(e)}catch{const t=window.open();if(t)try{const e=JSON.stringify(__collectedLogs,null,2),s=t.document;s.title="Site logs",s.body.style.margin="0";const c=s.createElement("pre");c.style.margin="0",c.style.padding="12px",c.textContent=e,s.body.appendChild(c)}catch{}}}),document.addEventListener("DOMContentLoaded",()=>{document.body.appendChild(o)})})();try{document.addEventListener("visibilitychange",()=>__logCollect("visibilitychange",{hidden:document.hidden})),window.addEventListener("hashchange",o=>__logCollect("hashchange",{oldURL:o.oldURL,newURL:o.newURL})),window.addEventListener("popstate",o=>__logCollect("popstate",{state:o.state})),window.addEventListener("beforeunload",o=>__logCollect("beforeunload",{})),window.addEventListener("focusin",o=>{try{__logCollect("focusin",{tag:o.target&&o.target.tagName,id:o.target&&o.target.id||null,class:o.target&&o.target.className||null})}catch{}}),(function(){const o=HTMLElement.prototype.focus;o.__wrappedByCollectLogs||(HTMLElement.prototype.focus=function(){try{__logCollect("element.focus.called",{tag:this.tagName,id:this.id||null,options:arguments[0]||null})}catch{}try{__maybeTakeSnapshot&&__maybeTakeSnapshot("focus",this)}catch{}try{return o.apply(this,arguments)}catch{try{return o.call(this)}catch{}}},HTMLElement.prototype.focus.__wrappedByCollectLogs=!0)})(),(function(){const o=Element.prototype;if(!o.__scrollIntoViewLogged){const n=o.scrollIntoView;o.scrollIntoView=function(){try{__logCollect("element.scrollIntoView",{tag:this.tagName,id:this.id||null,args:Array.from(arguments)})}catch{}try{__maybeTakeSnapshot&&__maybeTakeSnapshot("scrollIntoView",this)}catch{}return n.apply(this,arguments)},o.__scrollIntoViewLogged=!0}})();try{const o=window.scrollTo;window.scrollTo=function(){try{__logCollect("window.scrollTo",{args:Array.from(arguments)})}catch{}try{__maybeTakeSnapshot&&__maybeTakeSnapshot("window.scrollTo",null)}catch{}return o.apply(window,arguments)}}catch{}try{const o=window.scrollBy;window.scrollBy=function(){try{__logCollect("window.scrollBy",{args:Array.from(arguments)})}catch{}try{__maybeTakeSnapshot&&__maybeTakeSnapshot("window.scrollBy",null)}catch{}return o.apply(window,arguments)}}catch{}try{const o=window.fetch;window.fetch=function(n,t){try{__logCollect("fetch.start",{url:n&&n.url||n,method:t&&t.method||"GET"})}catch{}return o.apply(this,arguments).then(e=>{try{__logCollect("fetch.end",{url:e&&e.url||n,status:e.status})}catch{}return e}).catch(e=>{try{__logCollect("fetch.error",{url:n,message:e&&e.message})}catch{}throw e})}}catch{}try{let n=function(){const t=new o;let e=null;const s=t.open;t.open=function(g,u){e=u;try{__logCollect("xhr.open",{method:g,url:u})}catch{}return s.apply(t,arguments)};const c=t.send;return t.send=function(){try{__logCollect("xhr.send",{url:e})}catch{}return t.addEventListener("loadend",function(){try{__logCollect("xhr.loadend",{url:e,status:t.status})}catch{}}),c.apply(t,arguments)},t};var WrappedXHR=n;const o=window.XMLHttpRequest;n.prototype=o.prototype,window.XMLHttpRequest=n}catch{}window.addEventListener("resize",()=>__logCollect("resize",{innerWidth:window.innerWidth,innerHeight:window.innerHeight})),window.addEventListener("orientationchange",()=>__logCollect("orientationchange",{orientation:window.orientation}));try{if(navigator.serviceWorker&&navigator.serviceWorker.register){const o=navigator.serviceWorker.register.bind(navigator.serviceWorker);navigator.serviceWorker.register=function(){const n=arguments;try{__logCollect("sw.register.start",{scope:n&&n[1]&&n[1].scope||null,script:n&&n[0]})}catch{}return o.apply(navigator.serviceWorker,arguments).then(t=>{try{__logCollect("sw.register.done",{scope:t.scope})}catch{}try{t.addEventListener("updatefound",()=>__logCollect("sw.updatefound",{})),t.waiting&&__logCollect("sw.waiting",{})}catch{}return t}).catch(t=>{try{__logCollect("sw.register.error",{message:t&&t.message})}catch{}throw t})}}}catch{}try{if(typeof ScrollTrigger<"u"&&ScrollTrigger&&ScrollTrigger.refresh){const o=ScrollTrigger.refresh.bind(ScrollTrigger);ScrollTrigger.refresh=function(){try{__logCollect("ScrollTrigger.refresh",{args:Array.from(arguments)})}catch{}return o.apply(this,arguments)}}}catch{}["touchend","pointerup","mouseup"].forEach(o=>{window.addEventListener(o,n=>{try{__logCollect("gesture."+o,{x:n.changedTouches&&n.changedTouches[0]&&n.changedTouches[0].clientX||n.clientX||null,y:n.changedTouches&&n.changedTouches[0]&&n.changedTouches[0].clientY||n.clientY||null})}catch{}},{passive:!0})});try{let o=document.documentElement.scrollHeight||document.body.scrollHeight||0;new MutationObserver(()=>{try{const t=document.documentElement.scrollHeight||document.body.scrollHeight||0;if(t!==o){__logCollect("docHeight.change",{from:o,to:t});try{__maybeTakeSnapshot&&__maybeTakeSnapshot("docHeight.change",document.documentElement)}catch{}o=t}}catch{}}).observe(document.documentElement||document.body,{childList:!0,subtree:!0,attributes:!0})}catch{}try{const n=t=>{try{const e=JSON.stringify(t,(s,c)=>typeof s=="string"&&/pass(word)?|token|secret|auth|credit|cc-number|card|ssn|cvv/i.test(s)?"[REDACTED]":typeof c=="string"&&c.length>200?c.slice(0,200)+"\u2026[truncated]":c);return e.length>8192?e.slice(0,8192)+"...[truncated]":e}catch{return String(t)}};try{["log","info","warn","error","debug"].forEach(t=>{const e=console[t]&&console[t].bind(console);e&&(console[t]=function(){try{__logCollect("console."+t,{args:Array.from(arguments).map(s=>typeof s=="object"?n(s):String(s))})}catch{}try{(t==="error"||t==="warn")&&__maybeTakeSnapshot&&__maybeTakeSnapshot("console."+t,document.activeElement)}catch{}return e.apply(console,arguments)})})}catch{}window.addEventListener("error",t=>{try{__logCollect("window.error",{message:t.message,filename:t.filename,lineno:t.lineno,colno:t.colno,stack:t.error&&t.error.stack?String(t.error.stack).slice(0,1e3):null});try{__maybeTakeSnapshot&&__maybeTakeSnapshot("error",t&&t.target?t.target:document.activeElement)}catch{}}catch{}}),window.addEventListener("unhandledrejection",t=>{try{__logCollect("unhandledrejection",{reason:t.reason&&(t.reason.stack?String(t.reason.stack).slice(0,1e3):String(t.reason))})}catch{}});try{const t=localStorage.setItem.bind(localStorage);localStorage.setItem=function(e,s){try{__logCollect("localStorage.setItem",{key:String(e),size:s&&s.length||0})}catch{}return t(e,s)}}catch{}try{const t=sessionStorage.setItem.bind(sessionStorage);sessionStorage.setItem=function(e,s){try{__logCollect("sessionStorage.setItem",{key:String(e),size:s&&s.length||0})}catch{}return t(e,s)}}catch{}try{if(navigator&&navigator.sendBeacon){const t=navigator.sendBeacon.bind(navigator);navigator.sendBeacon=function(e,s){try{__logCollect("navigator.sendBeacon",{url:String(e),dataSize:s&&s.size||null})}catch{}return t(e,s)}}}catch{}try{document.addEventListener("click",t=>{try{const e=t.target&&(t.target.closest?t.target.closest("a,button,input,select,textarea,summary"):t.target);if(!e)return;const s=(e.tagName||"").toLowerCase(),c={tag:s,id:e.id||null,classes:e.className||null};s==="a"&&e.href&&(c.href=e.href.length>200?e.href.slice(0,200)+"\u2026":e.href),__logCollect("dom.click",c);try{["a","button","input","textarea","select"].includes(s)&&__maybeTakeSnapshot&&__maybeTakeSnapshot("click",e)}catch{}}catch{}},{passive:!0}),document.addEventListener("submit",t=>{try{const e=t.target;if(!e||!e.tagName||e.tagName.toLowerCase()!=="form")return;const s=Array.from(e.elements||[]).filter(c=>c.name).map(c=>({name:c.name,type:c.type||c.tagName}));__logCollect("form.submit",{action:e.action||null,method:e.method||"GET",fields:s})}catch{}},!0)}catch{}try{document.addEventListener("input",t=>{try{const e=t.target;if(!e)return;const s=e.tagName&&e.tagName.toLowerCase();if(s==="input"||s==="textarea"||s==="select"){const c={tag:s,type:e.type||null,name:e.name||null,valueLength:e.value&&e.value.length||0};__logCollect("input",c)}}catch{}},{passive:!0})}catch{}try{document.addEventListener("selectionchange",()=>{try{const t=document.getSelection&&document.getSelection();if(!t)return;const e=t.toString(),s=t.anchorNode&&t.anchorNode.parentElement&&t.anchorNode.parentElement.tagName;__logCollect("selectionchange",{length:e.length,container:s||null})}catch{}})}catch{}try{["copy","cut","paste"].forEach(t=>{document.addEventListener(t,e=>{try{__logCollect("clipboard."+t,{})}catch{}})})}catch{}try{if("PerformanceObserver"in window)try{new PerformanceObserver(e=>{e.getEntries().forEach(s=>{try{s.entryType==="longtask"?__logCollect("perf.longtask",{duration:Math.round(s.duration)}):s.entryType==="resource"&&__logCollect("perf.resource",{name:s.name,initiatorType:s.initiatorType,duration:Math.round(s.duration)})}catch{}})}).observe({entryTypes:["longtask","resource"]})}catch{}}catch{}try{const t=EventTarget.prototype.addEventListener;EventTarget.prototype.addEventListener=function(e,s,c){try{__logCollect("addEventListener",{target:this&&this.tagName?this.tagName:this&&this.constructor&&this.constructor.name||"unknown",type:e})}catch{}return t.apply(this,arguments)}}catch{}}catch{}}catch{}window.tryGuardedReload=function(o){o=o||{};const n=typeof o.MAX=="number"?o.MAX:3e4,t=typeof o.RETRY=="number"?o.RETRY:500,e=o&&typeof o.fallback=="function"?o.fallback:null,s=Date.now();(function c(){try{if(!(typeof window.__userInteracting<"u"?window.__userInteracting:!1)){try{window.location.reload()}catch{try{window.location.href=window.location.href}catch{}}return}if(Date.now()-s<n){setTimeout(c,t);return}if(e)try{e()}catch{try{window.location.reload()}catch{}}else try{window.location.reload()}catch{try{window.location.href=window.location.href}catch{}}}catch{if(e)try{e()}catch{try{window.location.reload()}catch{}}else try{window.location.reload()}catch{}}})()}}const initDarkMode=()=>{const r=document.getElementById("theme-toggle");if(!r)return;const i=window.matchMedia("(prefers-color-scheme: dark)").matches,o=localStorage.getItem("theme"),n=o||(i?"dark":"light");document.documentElement.setAttribute("data-theme",n),o||localStorage.setItem("theme",n),r.innerHTML=n==="dark"?'<span style="color: #e1d4c2">\u{1F506}</span>':'<span style="color: #212842">\u{1F319}</span>';const t=()=>{const e=document.documentElement.getAttribute("data-theme"),s=e==="light"?"dark":"light";document.documentElement.setAttribute("data-theme",s),localStorage.setItem("theme",s),r.innerHTML=s==="dark"?'<span style="color: #e1d4c2">\u{1F506}</span>':'<span style="color: #212842">\u{1F319}</span>',typeof clarity=="function"&&clarity("event","theme_toggle",{theme:s}),typeof gtag=="function"&&gtag("event","theme_toggle",{event_category:"user_preference",event_label:s}),r.setAttribute("aria-label",`Switch to ${e} mode`)};window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",e=>{if(!localStorage.getItem("theme_manual")){const s=e.matches?"dark":"light";document.documentElement.setAttribute("data-theme",s),localStorage.setItem("theme",s),r.innerHTML=s==="dark"?'<span style="color: #e1d4c2">\u{1F506}</span>':'<span style="color: #212842">\u{1F319}</span>'}}),r.addEventListener("click",()=>{t(),localStorage.setItem("theme_manual","true")})},initMobileMenu=()=>{const r=document.getElementById("mobile-menu-toggle"),i=document.getElementById("mobile-menu");if(!r||!i)return;let o=0,n=null;const t=()=>n||(n=document.createElement("div"),n.setAttribute("aria-hidden","true"),n.style.position="fixed",n.style.left="0",n.style.top="0",n.style.right="0",n.style.bottom="0",n.style.zIndex="35",n.style.background="rgba(0,0,0,0.35)",n.addEventListener("click",()=>s()),n),e=()=>{o=window.scrollY;try{const u=t();u.parentElement||document.body.appendChild(u)}catch{}i.classList.remove("hidden"),r.setAttribute("aria-expanded","true"),document.body.style.position="fixed",document.body.style.top=`-${o}px`,document.body.style.width="100%";const g=r.querySelector("svg");g&&(g.style.transform="rotate(90deg)")},s=()=>{if(i.classList.contains("hidden"))return;i.classList.add("hidden"),r.setAttribute("aria-expanded","false"),n&&n.parentElement&&n.parentElement.removeChild(n),document.body.style.position="",document.body.style.top="",document.body.style.width="",window.scrollTo(0,o);const g=r.querySelector("svg");g&&(g.style.transform="rotate(0deg)")},c=()=>{r.getAttribute("aria-expanded")==="true"?s():e()};r.addEventListener("click",g=>{g.preventDefault(),g.stopPropagation(),c()}),document.addEventListener("click",g=>{!r.contains(g.target)&&!i.contains(g.target)&&s()}),document.addEventListener("keydown",g=>{g.key==="Escape"&&s()}),window.addEventListener("hashchange",s),window.addEventListener("popstate",s),i.addEventListener("click",g=>{(g.target.tagName==="A"||g.target.closest("a"))&&s()})},initAriaCurrent=()=>{const r=n=>{try{return n?(n=String(n).split("#")[0].split("?")[0],n.endsWith(".html")&&(n=n.slice(0,-5)),n.length>1&&n.endsWith("/")&&(n=n.slice(0,-1)),n||"/"):"/"}catch{return"/"}},i=r(window.location&&window.location.pathname);document.querySelectorAll("header a[href], #mobile-menu a[href]").forEach(n=>{try{const t=n.getAttribute("href");if(!t||/^(https?:)?\/\//i.test(t)||/^mailto:/i.test(t)||t.startsWith("#"))return;r(t)===i?n.setAttribute("aria-current","page"):n.removeAttribute("aria-current")}catch{}})},initRevealOnViewFallback=()=>{try{const r=typeof window<"u"&&typeof window.matchMedia=="function"&&window.matchMedia("(prefers-reduced-motion: reduce)").matches,i=Array.from(document.querySelectorAll("[data-gsap], [data-reveal], .reveal"));if(!i.length)return;i.forEach(t=>{try{t.classList.add("reveal")}catch{}});const o=t=>{try{t.classList.add("is-visible")}catch{}try{t.classList.remove("opacity-0","translate-y-8")}catch{}};if(r||typeof IntersectionObserver>"u"){i.forEach(o);return}const n=new IntersectionObserver((t,e)=>{t.forEach(s=>{if(s.isIntersecting){o(s.target);try{e.unobserve(s.target)}catch{}}})},{threshold:.15,rootMargin:"0px 0px -10% 0px"});i.forEach(t=>{try{n.observe(t)}catch{o(t)}})}catch{}},initAnimations=()=>{const r=typeof window<"u"&&typeof window.matchMedia=="function"&&window.matchMedia("(max-width: 768px)").matches,i=typeof window<"u"&&typeof window.matchMedia=="function"&&window.matchMedia("(prefers-reduced-motion: reduce)").matches;if(initRevealOnViewFallback(),typeof gsap>"u"||typeof ScrollTrigger>"u"||i||r)return;gsap.registerPlugin(ScrollTrigger),document.querySelectorAll('[data-gsap="fade-up"]').forEach(e=>{const s=e.getAttribute("data-gsap-delay")||0;try{e.classList.remove("reveal","is-visible")}catch{}gsap.set(e,{autoAlpha:0,y:12,willChange:"opacity, transform"}),gsap.to(e,{autoAlpha:1,y:0,duration:.5,delay:parseFloat(s)*.5,ease:"power2.out",clearProps:"willChange",scrollTrigger:{trigger:e,start:"top 92%",toggleActions:"play none none none"}})});const n=document.querySelector("section:first-of-type");n&&!r&&!n.classList.contains("no-parallax")&&gsap.to(n,{yPercent:20,ease:"none",scrollTrigger:{trigger:n,start:"top top",end:"bottom top",scrub:!0}}),document.querySelectorAll(".card-hover").forEach(e=>{e.addEventListener("mouseenter",()=>{gsap.to(e,{y:-8,duration:.3,ease:"power2.out"})}),e.addEventListener("mouseleave",()=>{gsap.to(e,{y:0,duration:.3,ease:"power2.out"})})})},loadGSAPAndInit=()=>{const r=typeof window<"u"&&typeof window.matchMedia=="function"&&window.matchMedia("(max-width: 768px)").matches,i=()=>{if(window.gsap&&window.ScrollTrigger){initAnimations();return}const o=document.createElement("script");o.src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js",o.onload=()=>{const n=document.createElement("script");n.src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js",n.onload=()=>{initAnimations()},document.body.appendChild(n)},document.body.appendChild(o)};if(r){initAnimations();return}i()},initSmoothScroll=()=>{document.addEventListener("click",r=>{const i=r.target.closest("a");if(!i)return;const o=i.getAttribute("href");if(o==="#"){r.preventDefault(),r.stopPropagation();return}if(o&&o.startsWith("#")&&o.length>1){const n=document.querySelector(o);if(n){r.preventDefault();const s=n.getBoundingClientRect().top+window.pageYOffset-100;window.scrollTo({top:s,behavior:"smooth"})}}},{passive:!1})},initFormValidation=()=>{const r=document.querySelector('form[action*="formspree.io"]');if(!r)return;const i=r.querySelectorAll("input, textarea, select"),o=r.querySelector('input[type="file"][name="file"]'),n=5*1024*1024,t=["csv","doc","docx","pdf","txt","xls","xlsx","jpg","jpeg","png","gif","svg","webp"],e=r.querySelector('input[name="link"]'),s=p=>{if(!p)return!0;let S=p.trim();/^https?:\/\//i.test(S)||(S=`https://${S}`);let h;try{h=new URL(S)}catch{return!1}return!["javascript:","data:","file:","blob:","chrome:","chrome-extension:"].includes(h.protocol)};e&&e.addEventListener("blur",()=>{e.value&&!/^https?:\/\//i.test(e.value)&&(e.value=`https://${e.value.trim()}`)});const c=(p,S)=>{p.classList.add("border-red-500");let h=p.parentElement.querySelector(".inline-error");h||(h=document.createElement("p"),h.className="inline-error text-xs text-red-600 mt-1",p.parentElement.appendChild(h)),h.textContent=S},g=p=>{p.classList.remove("border-red-500");const S=p.parentElement.querySelector(".inline-error");S&&S.remove()};i.forEach(p=>{p.addEventListener("blur",()=>{p.hasAttribute("required")&&!p.value.trim()?c(p,"This field is required"):p.type==="email"&&p.value&&!p.checkValidity()?c(p,"Please enter a valid email address"):p.type==="url"&&p.value&&!s(p.value)?c(p,"Please enter a valid URL"):p.checkValidity()?g(p):c(p,p.validationMessage||"Invalid input")}),p.addEventListener("input",()=>{p.classList.contains("border-red-500")&&p.checkValidity()&&p.value.trim()&&g(p)})});let u=r.querySelector("#form-status");u||(u=document.createElement("div"),u.id="form-status",u.className="text-sm mt-3",r.appendChild(u));const T=p=>{const S=r.querySelector('button[type="submit"]');S&&(S.disabled=p,S.classList.toggle("loading",p))},I=async()=>{T(!0),u.textContent="";try{const p=new FormData(r);if(o&&o.files&&o.files[0]){const h=o.files[0],m=(h.name.split(".").pop()||"").toLowerCase();if(!t.includes(m)){u.className="text-sm mt-3 text-red-700",u.textContent="Unsupported file type. Please upload one of: CSV, DOC, DOCX, PDF, TXT, XLS, XLSX, JPG, JPEG, PNG, GIF, SVG, WEBP.",T(!1);return}if(h.size>n){u.className="text-sm mt-3 text-red-700",u.textContent="File too large (max 5MB). Please upload a smaller file.",T(!1);return}}if(e&&e.value&&!s(e.value)){u.className="text-sm mt-3 text-red-700",u.textContent="Please enter a valid link starting with https:// or http://",T(!1);return}if((await fetch(r.action,{method:"POST",body:p,headers:{Accept:"application/json"},mode:"cors",credentials:"omit"})).ok){r.reset();const h=r.parentElement;h&&(h.innerHTML=`
                        <h2 class="text-2xl font-bold text-indigodeep mb-2">Thanks - message sent!</h2>
                        <p class="text-sm text-chocolate mb-4">Enjoy a quick game while you're here.</p>
                        <div id="mini-game-root" class="w-full bg-white border border-chocolate/10 rounded-xl p-4"></div>
                    `,initMiniGame("mini-game-root"))}else{u.className="text-sm mt-3 text-red-700",u.textContent="Sorry, something went wrong. Trying fallback...";try{r.setAttribute("target","_blank"),r.submit()}catch{u.textContent="Sorry, something went wrong. Please try again or email hello@estivanayramia.com."}}}catch{u.className="text-sm mt-3 text-red-700",u.textContent="Network error detected. Opening fallback submit...";try{r.setAttribute("target","_blank"),r.submit()}catch{u.textContent="Network error. Please check your connection or email hello@estivanayramia.com."}}finally{T(!1)}};r.addEventListener("submit",p=>{let S=!0;if(i.forEach(h=>{h.checkValidity()||(S=!1,h.classList.add("border-red-500"))}),p.preventDefault(),!S){const h=r.querySelector(".border-red-500");if(h)try{h.focus({preventScroll:!0})}catch{try{__logCollect&&__logCollect("focus-fallback",{selector:h.tagName+(h.id?"#"+h.id:"")})}catch{}h.focus()}u.className="text-sm mt-3 text-red-700",u.textContent="Please complete required fields highlighted in red.";return}I()})},initMiniGame=r=>{const i=document.getElementById(r);if(!i)return;const o="mgHighScore",n="mgLeaderboard",t=parseInt(localStorage.getItem(o)||"0",10),e=()=>{try{const w=localStorage.getItem(n);if(!w)return[];const W=JSON.parse(w);return Array.isArray(W)?W.filter(H=>typeof H.name=="string"&&typeof H.score=="number").slice(0,25):[]}catch{return[]}},s=w=>{try{localStorage.setItem(n,JSON.stringify(w.slice(0,25)))}catch{}};let c=e();i.innerHTML=`
        <div class="flex items-center justify-between mb-2">
            <div class="text-sm font-medium text-indigodeep">Score: <span id="mg-score">0</span> <span id="mg-mult" class="ml-2 text-ink/60">x1</span></div>
            <div class="text-xs text-ink/60">Best: <span id="mg-best">${t}</span></div>
        </div>
        <div class="flex items-center justify-between mb-2">
            <div class="text-xs text-ink/60">Lives: <span id="mg-lives">\u2764\u2764\u2764</span></div>
            <button id="mg-start" class="text-xs bg-indigodeep text-white px-3 py-1 rounded-full">Start</button>
        </div>
        <canvas id="mg-canvas" class="w-full rounded border border-chocolate/10" style="touch-action: none; height: 320px;"></canvas>
        <p class="text-xs text-ink/60 mt-2">Catch the orbs. Golden orbs are bonus. Tap/drag on mobile, or use \u25C0 \u25B6.</p>
    `;const g=i.querySelector("#mg-canvas"),u=i.querySelector("#mg-score"),T=i.querySelector("#mg-mult"),I=i.querySelector("#mg-best"),p=i.querySelector("#mg-lives"),S=i.querySelector("#mg-start"),h=g.getContext("2d"),m=window.devicePixelRatio||1,a={running:!1,score:0,best:t,w:0,h:0,paddle:{x:0,y:0,w:90,h:12},orbs:[],particles:[],lastSpawn:0,orbInterval:900,baseSpeed:2.2,lives:3,combo:0,comboTimer:0,shake:0,t:0},z=()=>{const w=g.getBoundingClientRect();g.width=Math.floor(w.width*m),g.height=Math.floor(320*m),a.w=g.width,a.h=g.height,a.paddle.y=a.h-30*m,a.paddle.x===0&&(a.paddle.x=a.w/2-a.paddle.w*m/2),$()},J=w=>"\u2764\u2764\u2764".slice(0,w),R=w=>{navigator.vibrate&&navigator.vibrate(w)},O=(w,W,H="#212842",P=10)=>{for(let Y=0;Y<P;Y++)a.particles.push({x:w,y:W,vx:(Math.random()-.5)*3*m,vy:-Math.random()*3*m,life:600,color:H,r:2*m})},G=()=>{const w=(8+Math.random()*2)*m,W=w+Math.random()*(a.w-2*w),H=Math.random()<.15,P=H?"#eab308":"#362017",Y=(a.baseSpeed+Math.random()*1.5+a.score*.01)*m;a.orbs.push({x:W,y:w+2,r:w,vy:Y,color:P,type:H?"gold":"normal"})},V=()=>{const w=h.createLinearGradient(0,0,a.w,a.h),W=(Math.sin(a.t*.001)+1)/2;w.addColorStop(0,`rgba(${210+20*W|0}, ${200+10*W|0}, 180, 0.6)`),w.addColorStop(1,"rgba(200, 190, 170, 0.6)"),h.fillStyle=w,h.fillRect(0,0,a.w,a.h)},$=()=>{const w=a.shake?Math.random()*a.shake-a.shake/2:0,W=a.shake?Math.random()*a.shake-a.shake/2:0;h.setTransform(1,0,0,1,0,0),h.clearRect(0,0,a.w,a.h),h.translate(w,W),V();const H=Math.min(a.combo,6);h.shadowColor="rgba(33,40,66,0.6)",h.shadowBlur=H*2*m,h.fillStyle="#212842",h.fillRect(a.paddle.x,a.paddle.y,a.paddle.w*m,a.paddle.h*m),h.shadowBlur=0,a.particles.forEach(P=>{h.globalAlpha=Math.max(0,P.life/600),h.fillStyle=P.color,h.beginPath(),h.arc(P.x,P.y,P.r,0,Math.PI*2),h.fill(),h.globalAlpha=1}),a.orbs.forEach(P=>{h.beginPath(),h.fillStyle=P.color,h.shadowColor=P.type==="gold"?"rgba(234,179,8,0.6)":"rgba(54,32,23,0.3)",h.shadowBlur=P.type==="gold"?8*m:4*m,h.arc(P.x,P.y,P.r,0,Math.PI*2),h.fill(),h.shadowBlur=0})},b=w=>{if(!a.running)return;a.last||(a.last=w);const W=w-a.last;a.t+=W,a.last=w,a.comboTimer+=W,a.comboTimer>1600&&a.combo>0&&(a.combo=0,T.textContent="x1"),a.shake>0&&(a.shake=Math.max(0,a.shake-.5*m)),w-a.lastSpawn>a.orbInterval&&(G(),a.lastSpawn=w,a.orbInterval>420&&(a.orbInterval-=8));const H=a.paddle.w*m,P=a.paddle.h*m,Y=a.paddle.x,X=a.paddle.y;a.orbs.forEach(d=>{d.y+=d.vy});for(let d=a.particles.length-1;d>=0;d--){const l=a.particles[d];l.x+=l.vx,l.y+=l.vy,l.vy+=.04*m,l.life-=W,l.life<=0&&a.particles.splice(d,1)}for(let d=a.orbs.length-1;d>=0;d--){const l=a.orbs[d];if(l.y+l.r>=X&&l.x>=Y&&l.x<=Y+H){const v=l.type==="gold"?5:1;a.combo=Math.min(a.combo+1,9),a.comboTimer=0;const L=1+Math.floor(a.combo/3);a.score+=v*L,u.textContent=a.score,T.textContent="x"+L,O(l.x,X,l.color,l.type==="gold"?18:10),a.shake=Math.min(6*m,a.shake+(l.type==="gold"?4:2)),R(l.type==="gold"?25:12),a.orbs.splice(d,1),a.score%10===0&&O(l.x,l.y,"#e1d4c2",24)}else if(l.y-l.r>a.h&&(a.orbs.splice(d,1),a.lives-=1,p.textContent=J(a.lives),a.combo=0,T.textContent="x1",a.shake=10*m,R(60),a.lives<=0)){D();return}}$(),requestAnimationFrame(b)},D=()=>{a.running=!1,a.score>a.best&&(a.best=a.score,localStorage.setItem(o,String(a.best)),I.textContent=a.best),S.textContent="Restart";const w=document.createElement("div");w.className="mt-3 text-sm text-indigodeep mg-end",w.innerHTML=`
            <div class="mb-1 font-medium">Game over! Final score: ${a.score}</div>
            <p class="text-ink/80 mb-2">Hope you enjoyed this little easter egg - I'll be in touch soon.</p>
            <p class="text-ink/60">Want more surprises? Explore a few corners of the site:</p>
            <div class="mt-2 flex flex-wrap gap-2">
                <a href="overview.html" class="text-xs px-3 py-1 rounded-full border border-chocolate/20 text-indigodeep hover:bg-beige transition-colors">Overview</a>
                <a href="deep-dive.html" class="text-xs px-3 py-1 rounded-full border border-chocolate/20 text-indigodeep hover:bg-beige transition-colors">Deep Dive</a>
                <a href="projects.html" class="text-xs px-3 py-1 rounded-full border border-chocolate/20 text-indigodeep hover:bg-beige transition-colors">Projects</a>
            </div>
            ${a.score>0?`<div class='mt-4 border-t border-chocolate/10 pt-3'>
                <p class='text-ink/70 mb-2'>Submit your score to the local leaderboard (device-only) or view current rankings.</p>
                <div class='flex flex-col sm:flex-row gap-2 sm:items-center'>
                    <input id='mg-name' maxlength='16' placeholder='Username (3-16 chars)' class='flex-1 px-3 py-2 text-sm border border-chocolate/20 rounded focus:outline-none focus:ring-2 focus:ring-indigodeep'/>
                    <button id='mg-save' class='text-xs bg-indigodeep text-white px-4 py-2 rounded-full'>Save Score</button>
                    <button id='mg-view' class='text-xs bg-chocolate text-white px-4 py-2 rounded-full'>View Leaderboard</button>
                </div>
                <div id='mg-name-error' class='mt-2 text-xs text-red-600 hidden'></div>
                <div id='mg-leaderboard' class='mt-3 hidden'></div>
            </div>`:""}
        `,i.appendChild(w);const W=w.querySelector("#mg-name"),H=w.querySelector("#mg-save"),P=w.querySelector("#mg-view"),Y=w.querySelector("#mg-name-error"),X=w.querySelector("#mg-leaderboard");if(!H||!P)return;const d=["fuck","shit","bitch","cunt","dick","piss","cock","asshole","retard","fag","faggot","nigger","nigga","spic","chink","whore","slut","bastard","twat","rape","cum","penis","vagina"],l=x=>x.toLowerCase().replace(/[@]/g,"a").replace(/[$]/g,"s").replace(/0/g,"o").replace(/1/g,"i").replace(/3/g,"e").replace(/4/g,"a").replace(/5/g,"s").replace(/7/g,"t"),v=x=>{const y=l(x).replace(/[_-]/g,"");return!d.some(E=>y.includes(E))},L=/^[A-Za-z0-9_-]{3,16}$/,A=()=>{if(!X)return;let x="<table class='w-full text-xs'><thead><tr class='text-indigodeep'><th class='text-left pb-1'>#</th><th class='text-left pb-1'>User</th><th class='text-right pb-1'>Score</th></tr></thead><tbody>";c.slice(0,10).forEach((y,E)=>{x+=`<tr class='border-t border-chocolate/10'><td class='py-1 pr-2'>${E+1}</td><td class='py-1 pr-2'>${y.name}</td><td class='py-1 text-right'>${y.score}</td></tr>`}),c.length===0&&(x+="<tr><td colspan='3' class='py-2 text-ink/60'>No scores yet.</td></tr>"),x+="</tbody></table>",X.innerHTML=x};P.addEventListener("click",()=>{X.classList.toggle("hidden"),X.classList.contains("hidden")?P.textContent="View Leaderboard":(A(),P.textContent="Hide Leaderboard")}),H.addEventListener("click",()=>{const x=(W.value||"").trim();if(!L.test(x)){Y.textContent="Username must be 3-16 chars: letters, numbers, _ or - only.",Y.classList.remove("hidden");return}if(!v(x)){Y.textContent="Please choose a different name (profanity not allowed).",Y.classList.remove("hidden");return}Y.classList.add("hidden"),c.push({name:x,score:a.score,ts:Date.now()}),c.sort((y,E)=>E.score-y.score||y.ts-E.ts),c=c.slice(0,25),s(c),A(),X.classList.remove("hidden"),P.textContent="Hide Leaderboard",H.disabled=!0,H.textContent="Saved"})},F=()=>{a.running=!0,a.score=0,u.textContent="0",a.orbs=[],a.particles=[],a.lastSpawn=0,a.orbInterval=900,a.baseSpeed=2.2,a.lives=3,p.textContent=J(3),a.combo=0,T.textContent="x1",a.t=0,a.shake=0,[...i.querySelectorAll(".mg-end")].forEach(w=>w.remove()),requestAnimationFrame(b)},q=w=>{const W=g.getBoundingClientRect();let H=(w-W.left)*m-a.paddle.w*m/2;H=Math.max(0,Math.min(H,a.w-a.paddle.w*m)),a.paddle.x=H};g.addEventListener("mousemove",w=>q(w.clientX)),g.addEventListener("touchstart",w=>{w.touches[0]&&q(w.touches[0].clientX)},{passive:!0}),g.addEventListener("touchmove",w=>{w.touches[0]&&q(w.touches[0].clientX)},{passive:!0}),window.addEventListener("keydown",w=>{w.key==="ArrowLeft"&&q(g.getBoundingClientRect().left+a.paddle.x/m-24),w.key==="ArrowRight"&&q(g.getBoundingClientRect().left+a.paddle.x/m+24)}),S.addEventListener("click",()=>{S.textContent="Playing...",F()}),window.addEventListener("resize",z),z(),$()},initLazyLoading=()=>{const r=document.querySelectorAll("img[data-src]");if("IntersectionObserver"in window){const i=new IntersectionObserver((o,n)=>{o.forEach(t=>{if(t.isIntersecting){const e=t.target;e.src=e.dataset.src,e.removeAttribute("data-src"),i.unobserve(e)}})});r.forEach(o=>i.observe(o))}else r.forEach(i=>{i.src=i.dataset.src,i.removeAttribute("data-src")})},initPdfPreviews=()=>{try{document.querySelectorAll(".preview-panel").forEach(r=>{try{const i=r.closest("section")||r.parentElement;if(!i)return;const o=i.querySelector('a[href$=".pdf"]');if(!o)return;const n=o.href;r.dataset.pdfLoaded="true";const t=u=>{try{r.innerHTML='<div class="rounded-xl border border-chocolate/20 bg-white/40 overflow-hidden p-8 text-center"><p class="text-sm text-chocolate/70">Inline PDF preview may be blocked by hosting or browser settings. Use the buttons below to open or download the deck.</p></div>',__logCollect&&__logCollect("pdf.preview.fallback",{url:n,reason:u})}catch{}};r.innerHTML=`<div class="py-12 bg-white/30 rounded-xl border border-chocolate/10 flex items-center justify-center min-h-[480px]">
  <div class="text-sm text-chocolate/60 flex items-center gap-2"><svg class="animate-spin h-4 w-4" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> Loading preview\u2026</div>
</div>`;const e=document.createElement("iframe");e.setAttribute("aria-label","PDF preview"),e.style.cssText="width:100%;height:480px;border:0;border-radius:12px;background:#fff;opacity:0;position:absolute;top:0;left:0;",e.referrerPolicy="strict-origin-when-cross-origin",r.style.position="relative",r.style.minHeight="480px";let s=!1,c=!1;const g=u=>{if(!c)if(c=!0,u){e.style.position="relative",e.style.opacity="1",e.style.transition="opacity 0.3s ease";const T=r.querySelector("div");T&&T.remove(),__logCollect&&__logCollect("pdf.preview.loaded",{url:n})}else{try{e.remove()}catch{}t("load_failed")}};e.addEventListener("load",()=>{s=!0,setTimeout(()=>g(!0),100)}),e.addEventListener("error",()=>g(!1));try{e.src=n,r.appendChild(e),__logCollect&&__logCollect("pdf.preview.attempt",{url:n})}catch{g(!1);return}setTimeout(()=>{s||g(!0)},5e3)}catch{}})}catch{}},initScrollToTop=()=>{const r=document.getElementById("scroll-to-top");if(!r||document.body.hasAttribute("data-disable-floating-ui"))return;const i=r.querySelector(".scroll-progress-circle"),o=i?parseFloat(i.getAttribute("r")||"22"):0,n=o>0?o*2*Math.PI:0;i&&n>0&&(i.style.strokeDasharray=`${n}`,i.style.strokeDashoffset=`${n}`);const t=()=>{const s=document.documentElement.scrollHeight-window.innerHeight,c=s*.25,g=window.scrollY;if(g>c?r.classList.add("show"):r.classList.remove("show"),i&&n>0&&s>0){const u=g/s,T=n-u*n;i.style.strokeDashoffset=T}},e=()=>{typeof clarity=="function"&&clarity("event","scroll_to_top_clicked"),typeof gtag=="function"&&gtag("event","scroll_to_top",{event_category:"navigation",event_label:"button_click"}),window.scrollTo({top:0,behavior:"smooth"})};window.addEventListener("scroll",t),r.addEventListener("click",e),t()},getCurrentLanguage=()=>document.documentElement.lang||"en",translations={achievement:{en:{unlocked:"Achievement Unlocked!",explorer:{name:"Explorer",description:"Visited all main pages"},reader:{name:"Deep Diver",description:"Read the full Deep Dive"},gamer:{name:"Game Master",description:"Played the contact form game"},chatter:{name:"Conversationalist",description:"Opened the chat"},nightOwl:{name:"Night Owl",description:"Toggled dark mode"},konami:{name:"Secret Discoverer",description:"Found the Konami code"},networker:{name:"Networker",description:"Visited social profiles"},formFiller:{name:"Messenger",description:"Submitted the contact form"}},es:{unlocked:"\xA1Logro Desbloqueado!",explorer:{name:"Explorador",description:"Visit\xF3 todas las p\xE1ginas principales"},reader:{name:"Buzo Profundo",description:"Ley\xF3 la inmersi\xF3n completa"},gamer:{name:"Maestro del Juego",description:"Jug\xF3 el juego del formulario de contacto"},chatter:{name:"Conversador",description:"Abri\xF3 el chat"},nightOwl:{name:"Noct\xE1mbulo",description:"Altern\xF3 el modo oscuro"},konami:{name:"Descubridor Secreto",description:"Encontr\xF3 el c\xF3digo Konami"},networker:{name:"Redactor",description:"Visit\xF3 perfiles sociales"},formFiller:{name:"Mensajero",description:"Envi\xF3 el formulario de contacto"}},ar:{unlocked:"\u062A\u0645 \u0625\u0644\u063A\u0627\u0621 \u0642\u0641\u0644 \u0627\u0644\u0625\u0646\u062C\u0627\u0632!",explorer:{name:"\u0627\u0644\u0645\u0633\u062A\u0643\u0634\u0641",description:"\u0632\u0627\u0631 \u062C\u0645\u064A\u0639 \u0627\u0644\u0635\u0641\u062D\u0627\u062A \u0627\u0644\u0631\u0626\u064A\u0633\u064A\u0629"},reader:{name:"\u0627\u0644\u063A\u0648\u0627\u0635 \u0627\u0644\u0639\u0645\u064A\u0642",description:"\u0642\u0631\u0623 \u0627\u0644\u063A\u0648\u0635 \u0627\u0644\u0643\u0627\u0645\u0644"},gamer:{name:"\u0633\u064A\u062F \u0627\u0644\u0644\u0639\u0628\u0629",description:"\u0644\u0639\u0628 \u0644\u0639\u0628\u0629 \u0646\u0645\u0648\u0630\u062C \u0627\u0644\u0627\u062A\u0635\u0627\u0644"},chatter:{name:"\u0627\u0644\u0645\u062D\u0627\u062F\u062B",description:"\u0641\u062A\u062D \u0627\u0644\u062F\u0631\u062F\u0634\u0629"},nightOwl:{name:"\u0628\u0648\u0645\u0629 \u0627\u0644\u0644\u064A\u0644",description:"\u0628\u062F\u0651\u0644 \u0627\u0644\u0648\u0636\u0639 \u0627\u0644\u0645\u0638\u0644\u0645"},konami:{name:"\u0627\u0644\u0645\u0643\u062A\u0634\u0641 \u0627\u0644\u0633\u0631\u064A",description:"\u0648\u062C\u062F \u0631\u0645\u0632 \u0643\u0648\u0646\u0627\u0645\u064A"},networker:{name:"\u0627\u0644\u0634\u0628\u0643\u064A",description:"\u0632\u0627\u0631 \u0627\u0644\u0645\u0644\u0641\u0627\u062A \u0627\u0644\u0634\u062E\u0635\u064A\u0629 \u0627\u0644\u0627\u062C\u062A\u0645\u0627\u0639\u064A\u0629"},formFiller:{name:"\u0627\u0644\u0631\u0633\u0648\u0644",description:"\u0623\u0631\u0633\u0644 \u0646\u0645\u0648\u0630\u062C \u0627\u0644\u0627\u062A\u0635\u0627\u0644"}}},konami:{en:{title:"\u{1F3AE} You found the secret!",message:"Congratulations! You've unlocked the Konami code.",giftText:"Click the gift for a surprise!",stats:"You're one of the {percent}% who found this!",compliments:["You're absolutely amazing! \u{1F31F}","You're a coding wizard! \u{1F9D9}\u200D\u2642\uFE0F","You're incredibly talented! \u{1F3A8}","You're a problem-solving genius! \u{1F9E0}","You're making the world better! \u{1F30D}","You're a creative powerhouse! \u26A1","You're inspiring others! \u{1F4AB}","You're a true innovator! \u{1F680}","You're exceptionally skilled! \u{1F3C6}","You're a digital artist! \u{1F3AD}","You're building something incredible! \u{1F3D7}\uFE0F","You're a technology trailblazer! \u{1F5FA}\uFE0F","You're exceptionally creative! \u{1F3A8}","You're a user experience master! \u{1F3AF}","You're a design virtuoso! \u{1F3A8}"]},es:{title:"\u{1F3AE} \xA1Encontraste el secreto!",message:"\xA1Felicitaciones! Has desbloqueado el c\xF3digo Konami.",giftText:"\xA1Haz clic en el regalo para una sorpresa!",stats:"\xA1Eres uno del {percent}% que encontr\xF3 esto!",compliments:["\xA1Eres absolutamente incre\xEDble! \u{1F31F}","\xA1Eres un mago de la programaci\xF3n! \u{1F9D9}\u200D\u2642\uFE0F","\xA1Eres incre\xEDblemente talentoso! \u{1F3A8}","\xA1Eres un genio para resolver problemas! \u{1F9E0}","\xA1Est\xE1s haciendo el mundo mejor! \u{1F30D}","\xA1Eres una potencia creativa! \u26A1","\xA1Est\xE1s inspirando a otros! \u{1F4AB}","\xA1Eres un verdadero innovador! \u{1F680}","\xA1Eres excepcionalmente h\xE1bil! \u{1F3C6}","\xA1Eres un artista digital! \u{1F3AD}","\xA1Est\xE1s construyendo algo incre\xEDble! \u{1F3D7}\uFE0F","\xA1Eres un pionero de la tecnolog\xEDa! \u{1F5FA}\uFE0F","\xA1Eres excepcionalmente creativo! \u{1F3A8}","\xA1Eres un maestro de la experiencia del usuario! \u{1F3AF}","\xA1Eres un virtuoso del dise\xF1o! \u{1F3A8}"]},ar:{title:"\u{1F3AE} \u0644\u0642\u062F \u0648\u062C\u062F\u062A \u0627\u0644\u0633\u0631!",message:"\u062A\u0647\u0627\u0646\u064A\u0646\u0627! \u0644\u0642\u062F \u0642\u0645\u062A \u0628\u0641\u062A\u062D \u0631\u0645\u0632 \u0643\u0648\u0646\u0627\u0645\u064A.",giftText:"\u0627\u0646\u0642\u0631 \u0639\u0644\u0649 \u0627\u0644\u0647\u062F\u064A\u0629 \u0644\u0644\u062D\u0635\u0648\u0644 \u0639\u0644\u0649 \u0645\u0641\u0627\u062C\u0623\u0629!",stats:"\u0623\u0646\u062A \u0648\u0627\u062D\u062F \u0645\u0646 {percent}% \u0627\u0644\u0630\u064A\u0646 \u0648\u062C\u062F\u0648\u0627 \u0647\u0630\u0627!",compliments:["\u0623\u0646\u062A \u0631\u0627\u0626\u0639 \u062A\u0645\u0627\u0645\u0627\u064B! \u{1F31F}","\u0623\u0646\u062A \u0633\u0627\u062D\u0631 \u0628\u0631\u0645\u062C\u0629! \u{1F9D9}\u200D\u2642\uFE0F","\u0623\u0646\u062A \u0645\u0648\u0647\u0648\u0628 \u0628\u0634\u0643\u0644 \u0644\u0627 \u064A\u0635\u062F\u0642! \u{1F3A8}","\u0623\u0646\u062A \u0639\u0628\u0642\u0631\u064A \u0641\u064A \u062D\u0644 \u0627\u0644\u0645\u0634\u0643\u0644\u0627\u062A! \u{1F9E0}","\u0623\u0646\u062A \u062A\u062C\u0639\u0644 \u0627\u0644\u0639\u0627\u0644\u0645 \u0623\u0641\u0636\u0644! \u{1F30D}","\u0623\u0646\u062A \u0642\u0648\u0629 \u0625\u0628\u062F\u0627\u0639\u064A\u0629! \u26A1","\u0623\u0646\u062A \u062A\u0644\u0647\u0645 \u0627\u0644\u0622\u062E\u0631\u064A\u0646! \u{1F4AB}","\u0623\u0646\u062A \u0645\u0628\u062A\u0643\u0631 \u062D\u0642\u064A\u0642\u064A! \u{1F680}","\u0623\u0646\u062A \u0645\u0627\u0647\u0631 \u0628\u0634\u0643\u0644 \u0627\u0633\u062A\u062B\u0646\u0627\u0626\u064A! \u{1F3C6}","\u0623\u0646\u062A \u0641\u0646\u0627\u0646 \u0631\u0642\u0645\u064A! \u{1F3AD}","\u0623\u0646\u062A \u062A\u0628\u0646\u064A \u0634\u064A\u0626\u0627\u064B \u0645\u0630\u0647\u0644\u0627\u064B! \u{1F3D7}\uFE0F","\u0623\u0646\u062A \u0631\u0627\u0626\u062F \u062A\u0643\u0646\u0648\u0644\u0648\u062C\u064A\u0627! \u{1F5FA}\uFE0F","\u0623\u0646\u062A \u0645\u0628\u062F\u0639 \u0628\u0634\u0643\u0644 \u0627\u0633\u062A\u062B\u0646\u0627\u0626\u064A! \u{1F3A8}","\u0623\u0646\u062A \u062E\u0628\u064A\u0631 \u0641\u064A \u062A\u062C\u0631\u0628\u0629 \u0627\u0644\u0645\u0633\u062A\u062E\u062F\u0645! \u{1F3AF}","\u0623\u0646\u062A \u0641\u0646\u0627\u0646 \u062A\u0635\u0645\u064A\u0645! \u{1F3A8}"]}},chat:{welcome:{en:"Hello! I am Savonie. Ask me anything about Estivan.",es:"\xA1Hola! Soy Savonie. Preg\xFAntame cualquier cosa sobre Estivan.",ar:"\u0645\u0631\u062D\u0628\u0627\u064B! \u0623\u0646\u0627 \u0633\u0627\u0641\u0648\u0646\u064A. \u0627\u0633\u0623\u0644\u0646\u064A \u0623\u064A \u0634\u064A\u0621 \u0639\u0646 \u0627\u0633\u062A\u064A\u0641\u0627\u0646."},defaultChips:{en:["What does Estivan do?","Tell me about his background","What are his skills?","How can I contact him?"],es:["\xBFQu\xE9 hace Estivan?","H\xE1blame de su experiencia","\xBFCu\xE1les son sus habilidades?","\xBFC\xF3mo puedo contactarlo?"],ar:["\u0645\u0627\u0630\u0627 \u064A\u0641\u0639\u0644 \u0627\u0633\u062A\u064A\u0641\u0627\u0646\u061F","\u0623\u062E\u0628\u0631\u0646\u064A \u0639\u0646 \u062E\u0644\u0641\u064A\u062A\u0647","\u0645\u0627 \u0647\u064A \u0645\u0647\u0627\u0631\u0627\u062A\u0647\u061F","\u0643\u064A\u0641 \u064A\u0645\u0643\u0646\u0646\u064A \u0627\u0644\u0627\u062A\u0635\u0627\u0644 \u0628\u0647\u061F"]},contextualSuggestions:{en:{skills:["What projects have you worked on?","Tell me about your experience","What are you learning currently?","How do you approach problem-solving?","What's your favorite skill to use?","How do you stay motivated in your work?"],background:["What are your main skills?","Tell me about your education","What industries have you worked in?","What inspired you to get into tech?","What's your professional journey been like?","Any mentors who influenced you?"],projects:["Can you show me your code?","What technologies did you use?","How long did it take to build?","What challenges did you overcome?","Did you work with a team?","What are your future plans for this project?"],contact:["Are you available for freelance work?","What's your typical response time?","Do you work remotely?","How can I best reach you?","What's your preferred way of communication?","Are you open to collaborations?"],education:["What certifications do you have?","What's your favorite programming language?","How do you stay updated with technology?","What was your most challenging course?","How has your education shaped your career?","Any online courses or self-learning?"],projectResponse:["Can you tell me more about that project?","What challenges did you face?","What did you learn from it?","What was the most interesting part?","How did you test it?","Would you do anything differently now?"],skillResponse:["How did you learn that?","Have you used it in projects?","What's your proficiency level?","What's your favorite way to apply this skill?","Any tips for beginners?","How has this skill evolved for you?"],early:["What are your main skills?","Tell me about your background","What projects are you proud of?","What's something unique about you?","Why did you choose this field?","What's your biggest achievement?"]},es:{skills:["\xBFEn qu\xE9 proyectos has trabajado?","H\xE1blame de tu experiencia","\xBFQu\xE9 est\xE1s aprendiendo actualmente?","\xBFC\xF3mo abordas la resoluci\xF3n de problemas?","\xBFCu\xE1l es tu habilidad favorita para usar?","\xBFC\xF3mo te mantienes motivado en tu trabajo?"],background:["\xBFCu\xE1les son tus principales habilidades?","H\xE1blame de tu educaci\xF3n","\xBFEn qu\xE9 industrias has trabajado?","\xBFQu\xE9 te inspir\xF3 a entrar en la tecnolog\xEDa?","\xBFC\xF3mo ha sido tu trayectoria profesional?","\xBFAlg\xFAn mentor que te haya influido?"],projects:["\xBFPuedes mostrarme tu c\xF3digo?","\xBFQu\xE9 tecnolog\xEDas usaste?","\xBFCu\xE1nto tiempo tom\xF3 construirlo?","\xBFQu\xE9 desaf\xEDos superaste?","\xBFTrabajaste con un equipo?","\xBFCu\xE1les son tus planes futuros para este proyecto?"],contact:["\xBFEst\xE1s disponible para trabajo freelance?","\xBFCu\xE1l es tu tiempo t\xEDpico de respuesta?","\xBFTrabajas de forma remota?","\xBFC\xF3mo puedo contactarte mejor?","\xBFCu\xE1l es tu forma preferida de comunicaci\xF3n?","\xBFEst\xE1s abierto a colaboraciones?"],education:["\xBFQu\xE9 certificaciones tienes?","\xBFCu\xE1l es tu lenguaje de programaci\xF3n favorito?","\xBFC\xF3mo te mantienes actualizado con la tecnolog\xEDa?","\xBFCu\xE1l fue tu curso m\xE1s desafiante?","\xBFC\xF3mo ha moldeado tu educaci\xF3n tu carrera?","\xBFAlg\xFAn curso en l\xEDnea o autoaprendizaje?"],projectResponse:["\xBFPuedes contarme m\xE1s sobre ese proyecto?","\xBFQu\xE9 desaf\xEDos enfrentaste?","\xBFQu\xE9 aprendiste de ello?","\xBFCu\xE1l fue la parte m\xE1s interesante?","\xBFC\xF3mo lo probaste?","\xBFHar\xEDas algo diferente ahora?"],skillResponse:["\xBFC\xF3mo aprendiste eso?","\xBFLo has usado en proyectos?","\xBFCu\xE1l es tu nivel de competencia?","\xBFCu\xE1l es tu forma favorita de aplicar esta habilidad?","\xBFAlg\xFAn consejo para principiantes?","\xBFC\xF3mo ha evolucionado esta habilidad para ti?"],early:["\xBFCu\xE1les son tus principales habilidades?","H\xE1blame de tu experiencia","\xBFDe qu\xE9 proyectos est\xE1s orgulloso?","\xBFQu\xE9 hay de \xFAnico en ti?","\xBFPor qu\xE9 elegiste este campo?","\xBFCu\xE1l es tu mayor logro?"]},ar:{skills:["\u0645\u0627 \u0647\u064A \u0627\u0644\u0645\u0634\u0627\u0631\u064A\u0639 \u0627\u0644\u062A\u064A \u0639\u0645\u0644\u062A \u0639\u0644\u064A\u0647\u0627\u061F","\u0623\u062E\u0628\u0631\u0646\u064A \u0639\u0646 \u062A\u062C\u0631\u0628\u062A\u0643","\u0645\u0627\u0630\u0627 \u062A\u062A\u0639\u0644\u0645 \u062D\u0627\u0644\u064A\u0627\u064B\u061F","\u0643\u064A\u0641 \u062A\u062A\u0639\u0627\u0645\u0644 \u0645\u0639 \u062D\u0644 \u0627\u0644\u0645\u0634\u0643\u0644\u0627\u062A\u061F","\u0645\u0627 \u0647\u064A \u0645\u0647\u0627\u0631\u062A\u0643 \u0627\u0644\u0645\u0641\u0636\u0644\u0629 \u0644\u0627\u0633\u062A\u062E\u062F\u0627\u0645\u0647\u0627\u061F","\u0643\u064A\u0641 \u062A\u062D\u0627\u0641\u0638 \u0639\u0644\u0649 \u062F\u0627\u0641\u0639\u0643 \u0641\u064A \u0639\u0645\u0644\u0643\u061F"],background:["\u0645\u0627 \u0647\u064A \u0645\u0647\u0627\u0631\u0627\u062A\u0643 \u0627\u0644\u0631\u0626\u064A\u0633\u064A\u0629\u061F","\u0623\u062E\u0628\u0631\u0646\u064A \u0639\u0646 \u062A\u0639\u0644\u064A\u0645\u0643","\u0641\u064A \u0623\u064A \u0635\u0646\u0627\u0639\u0627\u062A \u0639\u0645\u0644\u062A\u061F","\u0645\u0627 \u0627\u0644\u0630\u064A \u0623\u0644\u0647\u0645\u0643 \u0644\u0644\u062F\u062E\u0648\u0644 \u0641\u064A \u0645\u062C\u0627\u0644 \u0627\u0644\u062A\u0643\u0646\u0648\u0644\u0648\u062C\u064A\u0627\u061F","\u0643\u064A\u0641 \u0643\u0627\u0646\u062A \u0631\u062D\u0644\u062A\u0643 \u0627\u0644\u0645\u0647\u0646\u064A\u0629\u061F","\u0623\u064A \u0645\u0631\u0634\u062F\u064A\u0646 \u0623\u062B\u0631\u0648\u0627 \u0639\u0644\u064A\u0643\u061F"],projects:["\u0647\u0644 \u064A\u0645\u0643\u0646\u0643 \u0625\u0638\u0647\u0627\u0631 \u0643\u0648\u062F\u0643\u061F","\u0645\u0627 \u0647\u064A \u0627\u0644\u062A\u0642\u0646\u064A\u0627\u062A \u0627\u0644\u062A\u064A \u0627\u0633\u062A\u062E\u062F\u0645\u062A\u0647\u0627\u061F","\u0643\u0645 \u0645\u0646 \u0627\u0644\u0648\u0642\u062A \u0627\u0633\u062A\u063A\u0631\u0642 \u0628\u0646\u0627\u0624\u0647\u061F","\u0645\u0627 \u0647\u064A \u0627\u0644\u062A\u062D\u062F\u064A\u0627\u062A \u0627\u0644\u062A\u064A \u062A\u063A\u0644\u0628\u062A \u0639\u0644\u064A\u0647\u0627\u061F","\u0647\u0644 \u0639\u0645\u0644\u062A \u0645\u0639 \u0641\u0631\u064A\u0642\u061F","\u0645\u0627 \u0647\u064A \u062E\u0637\u0637\u0643 \u0627\u0644\u0645\u0633\u062A\u0642\u0628\u0644\u064A\u0629 \u0644\u0647\u0630\u0627 \u0627\u0644\u0645\u0634\u0631\u0648\u0639\u061F"],contact:["\u0647\u0644 \u0623\u0646\u062A \u0645\u062A\u0627\u062D \u0644\u0644\u0639\u0645\u0644 \u0627\u0644\u062D\u0631\u061F","\u0645\u0627 \u0647\u0648 \u0648\u0642\u062A \u0631\u062F\u0643 \u0627\u0644\u0645\u0639\u062A\u0627\u062F\u061F","\u0647\u0644 \u062A\u0639\u0645\u0644 \u0639\u0646 \u0628\u0639\u062F\u061F","\u0643\u064A\u0641 \u064A\u0645\u0643\u0646\u0646\u064A \u0627\u0644\u062A\u0648\u0627\u0635\u0644 \u0645\u0639\u0643 \u0628\u0634\u0643\u0644 \u0623\u0641\u0636\u0644\u061F","\u0645\u0627 \u0647\u064A \u0637\u0631\u064A\u0642\u0629 \u0627\u0644\u062A\u0648\u0627\u0635\u0644 \u0627\u0644\u0645\u0641\u0636\u0644\u0629 \u0644\u062F\u064A\u0643\u061F","\u0647\u0644 \u0623\u0646\u062A \u0645\u0641\u062A\u0648\u062D \u0644\u0644\u062A\u0639\u0627\u0648\u0646\u061F"],education:["\u0645\u0627 \u0647\u064A \u0627\u0644\u0634\u0647\u0627\u062F\u0627\u062A \u0627\u0644\u062A\u064A \u0644\u062F\u064A\u0643\u061F","\u0645\u0627 \u0647\u0648 \u0644\u063A\u0629 \u0627\u0644\u0628\u0631\u0645\u062C\u0629 \u0627\u0644\u0645\u0641\u0636\u0644\u0629 \u0644\u062F\u064A\u0643\u061F","\u0643\u064A\u0641 \u062A\u062D\u0627\u0641\u0638 \u0639\u0644\u0649 \u062A\u062D\u062F\u064A\u062B \u0646\u0641\u0633\u0643 \u0628\u0627\u0644\u062A\u0643\u0646\u0648\u0644\u0648\u062C\u064A\u0627\u061F","\u0645\u0627 \u0643\u0627\u0646 \u0623\u0643\u062B\u0631 \u062F\u0648\u0631\u0629 \u062A\u062D\u062F\u064A\u0627\u064B \u0644\u0643\u061F","\u0643\u064A\u0641 \u0634\u0643\u0644\u062A \u062A\u0639\u0644\u064A\u0645\u0643 \u0645\u0633\u064A\u0631\u062A\u0643 \u0627\u0644\u0645\u0647\u0646\u064A\u0629\u061F","\u0623\u064A \u062F\u0648\u0631\u0627\u062A \u0639\u0628\u0631 \u0627\u0644\u0625\u0646\u062A\u0631\u0646\u062A \u0623\u0648 \u062A\u0639\u0644\u0645 \u0630\u0627\u062A\u064A\u061F"],projectResponse:["\u0647\u0644 \u064A\u0645\u0643\u0646\u0643 \u0625\u062E\u0628\u0627\u0631\u064A \u0627\u0644\u0645\u0632\u064A\u062F \u0639\u0646 \u0647\u0630\u0627 \u0627\u0644\u0645\u0634\u0631\u0648\u0639\u061F","\u0645\u0627 \u0647\u064A \u0627\u0644\u062A\u062D\u062F\u064A\u0627\u062A \u0627\u0644\u062A\u064A \u0648\u0627\u062C\u0647\u062A\u0647\u0627\u061F","\u0645\u0627\u0630\u0627 \u062A\u0639\u0644\u0645\u062A \u0645\u0646\u0647\u061F","\u0645\u0627 \u0643\u0627\u0646\u062A \u0627\u0644\u062C\u0632\u0621 \u0627\u0644\u0623\u0643\u062B\u0631 \u0625\u062B\u0627\u0631\u0629 \u0644\u0644\u0627\u0647\u062A\u0645\u0627\u0645\u061F","\u0643\u064A\u0641 \u0627\u062E\u062A\u0628\u0631\u062A\u0647\u061F","\u0647\u0644 \u0633\u062A\u0641\u0639\u0644 \u0634\u064A\u0626\u0627\u064B \u0645\u062E\u062A\u0644\u0641\u0627\u064B \u0627\u0644\u0622\u0646\u061F"],skillResponse:["\u0643\u064A\u0641 \u062A\u0639\u0644\u0645\u062A \u0630\u0644\u0643\u061F","\u0647\u0644 \u0627\u0633\u062A\u062E\u062F\u0645\u062A\u0647 \u0641\u064A \u0645\u0634\u0627\u0631\u064A\u0639\u061F","\u0645\u0627 \u0647\u0648 \u0645\u0633\u062A\u0648\u0649 \u0645\u0647\u0627\u0631\u062A\u0643\u061F","\u0645\u0627 \u0647\u064A \u0637\u0631\u064A\u0642\u062A\u0643 \u0627\u0644\u0645\u0641\u0636\u0644\u0629 \u0644\u062A\u0637\u0628\u064A\u0642 \u0647\u0630\u0647 \u0627\u0644\u0645\u0647\u0627\u0631\u0629\u061F","\u0623\u064A \u0646\u0635\u0627\u0626\u062D \u0644\u0644\u0645\u0628\u062A\u062F\u0626\u064A\u0646\u061F","\u0643\u064A\u0641 \u062A\u0637\u0648\u0631\u062A \u0647\u0630\u0647 \u0627\u0644\u0645\u0647\u0627\u0631\u0629 \u0628\u0627\u0644\u0646\u0633\u0628\u0629 \u0644\u0643\u061F"],early:["\u0645\u0627 \u0647\u064A \u0645\u0647\u0627\u0631\u0627\u062A\u0643 \u0627\u0644\u0631\u0626\u064A\u0633\u064A\u0629\u061F","\u0623\u062E\u0628\u0631\u0646\u064A \u0639\u0646 \u062E\u0644\u0641\u064A\u062A\u0643","\u0645\u0627 \u0647\u064A \u0627\u0644\u0645\u0634\u0627\u0631\u064A\u0639 \u0627\u0644\u062A\u064A \u062A\u0641\u062E\u0631 \u0628\u0647\u0627\u061F","\u0645\u0627 \u0627\u0644\u0634\u064A\u0621 \u0627\u0644\u0641\u0631\u064A\u062F \u0641\u064A\u0643\u061F","\u0644\u0645\u0627\u0630\u0627 \u0627\u062E\u062A\u0631\u062A \u0647\u0630\u0627 \u0627\u0644\u0645\u062C\u0627\u0644\u061F","\u0645\u0627 \u0647\u0648 \u0623\u0643\u0628\u0631 \u0625\u0646\u062C\u0627\u0632 \u0644\u0643\u061F"]}},pinnedChips:{en:["Projects","Resume","Contact"],es:["Proyectos","Curr\xEDculum","Contacto"],ar:["\u0645\u0634\u0627\u0631\u064A\u0639","\u0627\u0644\u0633\u064A\u0631\u0629 \u0627\u0644\u0630\u0627\u062A\u064A\u0629","\u0627\u062A\u0635\u0627\u0644"]},pinnedFollowUps:{en:{projects:["Show me your top project","What tech stack do you use most?","Any detailed examples?"],resume:["Summarize your experience","What roles are you targeting?","What are your strongest skills?"],contact:["Email","LinkedIn","Best way to reach you?"]},es:{projects:["Mu\xE9strame tu mejor proyecto","\xBFQu\xE9 stack tecnol\xF3gico usas m\xE1s?","\xBFAlg\xFAn ejemplo detallado?"],resume:["Resume tu experiencia","\xBFQu\xE9 roles buscas?","\xBFCu\xE1les son tus habilidades m\xE1s fuertes?"],contact:["Email","LinkedIn","\xBFMejor forma de contactarte?"]},ar:{projects:["\u0623\u0631\u0646\u064A \u0623\u0641\u0636\u0644 \u0645\u0634\u0631\u0648\u0639 \u0644\u0643","\u0645\u0627 \u0647\u064A \u0627\u0644\u062A\u0642\u0646\u064A\u0627\u062A \u0627\u0644\u0623\u0643\u062B\u0631 \u0627\u0633\u062A\u062E\u062F\u0627\u0645\u0627\u064B\u061F","\u0623\u064A \u0623\u0645\u062B\u0644\u0629 \u0645\u0641\u0635\u0644\u0629\u061F"],resume:["\u0644\u062E\u0635 \u062E\u0628\u0631\u062A\u0643","\u0645\u0627 \u0647\u064A \u0627\u0644\u0623\u062F\u0648\u0627\u0631 \u0627\u0644\u0645\u0633\u062A\u0647\u062F\u0641\u0629\u061F","\u0645\u0627 \u0647\u064A \u0623\u0642\u0648\u0649 \u0645\u0647\u0627\u0631\u0627\u062A\u0643\u061F"],contact:["\u0627\u0644\u0628\u0631\u064A\u062F \u0627\u0644\u0625\u0644\u0643\u062A\u0631\u0648\u0646\u064A","LinkedIn","\u0623\u0641\u0636\u0644 \u0637\u0631\u064A\u0642\u0629 \u0644\u0644\u062A\u0648\u0627\u0635\u0644\u061F"]}}}},initAchievements=()=>{const r="portfolio_achievements",i={explorer:{id:"explorer",icon:"\u{1F5FA}\uFE0F"},reader:{id:"reader",icon:"\u{1F4D6}"},gamer:{id:"gamer",icon:"\u{1F3AE}"},chatter:{id:"chatter",icon:"\u{1F4AC}"},nightOwl:{id:"nightOwl",icon:"\u{1F319}"},konami:{id:"konami",icon:"\u{1F3AF}"},networker:{id:"networker",icon:"\u{1F517}"},formFiller:{id:"formFiller",icon:"\u2709\uFE0F"}},o=()=>{try{const u=localStorage.getItem(r);return u?JSON.parse(u):{}}catch{return{}}},n=u=>{try{localStorage.setItem(r,JSON.stringify(u))}catch{}},t=u=>{const T=o();if(T[u])return;const I=getCurrentLanguage(),p=translations.achievement[I]||translations.achievement.en,S={...i[u],...p&&p[u]?p[u]:{}};T[u]={unlockedAt:new Date().toISOString(),...S},n(T),e(S);try{const h="arcade_achievements",m=JSON.parse(localStorage.getItem(h)||"[]");Array.isArray(m)&&!m.includes(u)&&(m.push(u),localStorage.setItem(h,JSON.stringify(m))),window.ArcadeAchievements&&typeof window.ArcadeAchievements.updateUI=="function"&&window.ArcadeAchievements.updateUI()}catch{}},e=u=>{const T=getCurrentLanguage(),I=translations.achievement[T]||translations.achievement.en,S=($=>$?typeof $=="string"?{id:$}:typeof $=="object"?$:{}:{})(u),h=S.id||S.achievementId||S.key,m=typeof h=="string"?h:"",_=m.replace(/^site_/,"");let B={icon:S.icon,name:S.name||S.title,description:S.description||S.desc};if((!B.name||!B.description||!B.icon)&&m&&window.ArcadeAchievements&&typeof window.ArcadeAchievements.getDefinitions=="function"){const $=window.ArcadeAchievements.getDefinitions(),b=$&&$[m];b&&(B={icon:B.icon||b.icon,name:B.name||b.title||b.name,description:B.description||b.description||b.desc})}(!B.name||!B.description)&&I&&_&&I[_]&&(B={icon:B.icon||i[_]&&i[_].icon,name:B.name||I[_].name,description:B.description||I[_].description});const a=B.icon||"\u{1F3C6}",z=B.name||"Achievement",J=B.description||"",R=document.createElement("div");R.className="achievement-notification",R.innerHTML=`
            <div class="achievement-icon">${a}</div>
            <div class="achievement-content">
                <div class="achievement-title">${I&&I.unlocked?I.unlocked:"Achievement Unlocked!"}</div>
                <div class="achievement-name">${z}</div>
                <div class="achievement-desc">${J}</div>
            </div>
            <button class="achievement-close" aria-label="Close achievement notification">\xD7</button>
        `,document.body.appendChild(R);const O=R.querySelector(".achievement-close"),G=()=>{R.classList.remove("show"),setTimeout(()=>R.remove(),300)};O.addEventListener("click",G),setTimeout(()=>R.classList.add("show"),100);const V=setTimeout(()=>{document.body.contains(R)&&G()},4e3);O.addEventListener("click",()=>clearTimeout(V))},s=()=>{const u="portfolio_visited_pages";try{const T=JSON.parse(localStorage.getItem(u)||"[]"),I=window.location.pathname.split("/").pop()||"index.html";T.includes(I)||(T.push(I),localStorage.setItem(u,JSON.stringify(T))),["index.html","overview.html","deep-dive.html","about.html","projects.html","contact.html"].every(h=>T.includes(h))&&t("explorer"),I==="deep-dive.html"&&t("reader")}catch{}},c=()=>{const u=document.getElementById("theme-toggle");u&&u.addEventListener("click",()=>t("nightOwl"))},g=()=>{document.querySelectorAll('a[href*="linkedin.com"], a[href*="github.com"]').forEach(u=>{u.addEventListener("click",()=>t("networker"))})};s(),c(),g(),window.unlockAchievement=t},initKonamiCode=()=>{const r=["ArrowUp","ArrowUp","ArrowDown","ArrowDown","ArrowLeft","ArrowRight","ArrowLeft","ArrowRight","b","a"];let i=0;const o=()=>{window.dispatchEvent(new Event("konami-activated")),window.unlockAchievement&&window.unlockAchievement("konami");const t=getCurrentLanguage(),e=translations.konami[t],s=document.createElement("div");s.className="konami-modal",s.innerHTML=`
            <div class="konami-content">
                <div class="konami-header">
                    <h2>${e.title}</h2>
                    <button class="konami-close" aria-label="Close">&times;</button>
                </div>
                <div class="konami-body">
                    <p class="konami-message">${e.message}</p>
                    <div class="konami-gift">
                        <div class="gift-emoji">\u{1F381}</div>
                        <p class="gift-text">${e.giftText}</p>
                        <div class="compliment-container" style="display: none;">
                            <p class="compliment-text"></p>
                        </div>
                    </div>
                    <div class="konami-stats">
                        <p>${e.stats.replace("{percent}",Math.floor(Math.random()*10)+1)}</p>
                    </div>
                </div>
            </div>
        `,document.body.appendChild(s),setTimeout(()=>s.classList.add("show"),100);const c=s.querySelector(".gift-emoji"),g=s.querySelector(".compliment-container"),u=s.querySelector(".compliment-text"),T=s.querySelector(".gift-text"),I=e.compliments;c.addEventListener("click",()=>{c.style.display="none",T.style.display="none";const S=I[Math.floor(Math.random()*I.length)];u.textContent=S,g.style.display="block",c.classList.add("gift-opened"),n(),setTimeout(()=>{g.classList.add("sparkle")},500)});const p=()=>{s.classList.remove("show"),setTimeout(()=>s.remove(),300)};s.querySelector(".konami-close").addEventListener("click",p),s.addEventListener("click",S=>{S.target===s&&p()})},n=()=>{const t=["#ff6b6b","#4ecdc4","#45b7d1","#f9ca24","#f0932b","#eb4d4b","#6c5ce7","#a29bfe","#fd79a8","#e17055"];for(let s=0;s<50;s++){const c=document.createElement("div");c.className="confetti",c.style.left=Math.random()*100+"vw",c.style.backgroundColor=t[Math.floor(Math.random()*t.length)],c.style.animationDelay=Math.random()*3+"s",c.style.animationDuration=Math.random()*3+2+"s",document.body.appendChild(c),setTimeout(()=>{c.parentNode&&c.parentNode.removeChild(c)},5e3)}};document.addEventListener("keydown",t=>{t.key===r[i]?(i++,i===r.length&&(i=0,o())):i=0})},initPWA=()=>{if("serviceWorker"in navigator){let i=!!navigator.serviceWorker.controller,o=!1;navigator.serviceWorker.addEventListener("controllerchange",()=>{if(!i){i=!0;return}o||(o=!0)}),window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js").then(n=>{try{const t="sw_last_update_ts",e=Date.now(),s=parseInt(sessionStorage.getItem(t)||"0",10);(!Number.isFinite(s)||e-s>360*60*1e3)&&(sessionStorage.setItem(t,String(e)),n.update().catch(()=>{}))}catch{}}).catch(n=>{})})}let r;window.addEventListener("beforeinstallprompt",i=>{i.preventDefault(),r=i})},trackEventDebug=(r,i)=>{try{window.location.search.includes("debug-analytics=1")&&console.log("[Analytics Event]",r,i||null)}catch{}},initAnalytics=()=>{const r=(e,s)=>{const c=`button_click_${s}`;trackEventDebug(c),typeof clarity=="function"&&clarity("event",c),typeof gtag=="function"&&gtag("event","button_click",{event_category:"engagement",event_label:s})};document.querySelectorAll('a[href*="contact"], button[type="submit"]').forEach(e=>{e.addEventListener("click",()=>{const s=e.textContent.trim().replace(/\s+/g,"_").toLowerCase();r(e,s)})}),document.querySelectorAll("nav a").forEach(e=>{e.addEventListener("click",()=>{const s=e.getAttribute("href")||"unknown";trackEventDebug("navigation_click",{page:s}),typeof clarity=="function"&&clarity("event","navigation_click",{page:s}),typeof gtag=="function"&&gtag("event","navigation_click",{event_category:"navigation",event_label:s})})}),document.querySelectorAll('a[href*="linkedin.com"], a[href*="github.com"]').forEach(e=>{e.addEventListener("click",()=>{const s=e.href.includes("linkedin")?"linkedin":"github";trackEventDebug("social_click",{platform:s}),typeof clarity=="function"&&clarity("event","social_click",{platform:s}),typeof gtag=="function"&&gtag("event","social_click",{event_category:"social",event_label:s})})});const i=document.querySelector('form[action*="formspree.io"]');i&&i.addEventListener("submit",()=>{trackEventDebug("form_submission"),typeof clarity=="function"&&clarity("event","form_submission"),typeof gtag=="function"&&gtag("event","form_submission",{event_category:"engagement",event_label:"contact_form"})});let o=0,n={25:!1,50:!1,75:!1,100:!1};window.addEventListener("scroll",()=>{const e=Math.round((window.scrollY+window.innerHeight)/document.documentElement.scrollHeight*100);e>o&&(o=e,o>=25&&!n[25]&&(n[25]=!0,trackEventDebug("scroll_25_percent"),typeof clarity=="function"&&clarity("event","scroll_25_percent"),typeof gtag=="function"&&gtag("event","scroll",{event_category:"engagement",event_label:"25_percent"})),o>=50&&!n[50]&&(n[50]=!0,trackEventDebug("scroll_50_percent"),typeof clarity=="function"&&clarity("event","scroll_50_percent"),typeof gtag=="function"&&gtag("event","scroll",{event_category:"engagement",event_label:"50_percent"})),o>=75&&!n[75]&&(n[75]=!0,trackEventDebug("scroll_75_percent"),typeof clarity=="function"&&clarity("event","scroll_75_percent"),typeof gtag=="function"&&gtag("event","scroll",{event_category:"engagement",event_label:"75_percent"})),o>=100&&!n[100]&&(n[100]=!0,trackEventDebug("scroll_100_percent"),typeof clarity=="function"&&clarity("event","scroll_100_percent"),typeof gtag=="function"&&gtag("event","scroll",{event_category:"engagement",event_label:"100_percent"})))}),window.addEventListener("konami-activated",()=>{trackEventDebug("konami_code_activated"),typeof clarity=="function"&&clarity("event","konami_code_activated"),typeof gtag=="function"&&gtag("event","easter_egg",{event_category:"engagement",event_label:"konami_code"})});const t=window.unlockAchievement;t&&(window.unlockAchievement=(...e)=>{const s=e.length>1?e[1]:e[0];trackEventDebug("achievement_unlocked",{achievement:s}),typeof clarity=="function"&&clarity("event","achievement_unlocked",{achievement:s}),typeof gtag=="function"&&gtag("event","achievement_unlock",{event_category:"gamification",event_label:s}),t.apply(window,e)})},initPerformanceMonitoring=()=>{if("PerformanceObserver"in window)try{new PerformanceObserver(i=>{const o=i.getEntries(),n=o[o.length-1];typeof clarity=="function"&&clarity("set","lcp",Math.round(n.renderTime||n.loadTime));const t=n.renderTime||n.loadTime;t>2500&&console.warn("Poor LCP detected:",t,"ms")}).observe({type:"largest-contentful-paint",buffered:!0})}catch{}if("web-vital"in window){try{new PerformanceObserver(i=>{i.getEntries().forEach(n=>{const t=n.processingStart-n.startTime;typeof clarity=="function"&&clarity("set","fid",Math.round(t))})}).observe({type:"first-input",buffered:!0})}catch{}try{let r=0;new PerformanceObserver(o=>{for(const n of o.getEntries())n.hadRecentInput||(r+=n.value);typeof clarity=="function"&&clarity("set","cls",r.toFixed(4))}).observe({type:"layout-shift",buffered:!0})}catch{}}},initPhase2=()=>{document.body.addEventListener("click",i=>{const o=i.target.closest('a[href^="mailto:"]');if(!o)return;i.preventDefault();const n=o.href.replace("mailto:","").split("?")[0];navigator.clipboard&&navigator.clipboard.writeText?navigator.clipboard.writeText(n).then(()=>{if(o.innerText||o.textContent){const t=o.innerText||o.textContent;o.innerText="Copied! \u2705",setTimeout(()=>{o.innerText=t},2e3)}}).catch(()=>{window.location.href=o.href}):window.location.href=o.href});try{const i=document.getElementById("copyright-year");i&&(i.textContent=String(new Date().getFullYear()))}catch{}try{const i=document.querySelector("footer p.text-xs");if(i){const o=new Date().getFullYear();i.innerHTML=i.innerHTML.replace(/&copy;\s*\d{4}/,`&copy; ${o}`)}}catch{}const r=document.querySelector('form[action*="formspree"]');r&&r.addEventListener("submit",i=>{const o=r.querySelector('input[name="website_url"]');if(o&&o.value)return i.preventDefault(),!1})},__isEnglishChromePage=()=>{try{const r=document.documentElement&&document.documentElement.lang?document.documentElement.lang.toLowerCase():"en",i=window.location&&window.location.pathname?window.location.pathname:"/";return i.startsWith("/es/")||i.startsWith("/ar/")?!1:r==="en"}catch{return!1}},__ensureStandardEnglishChrome=()=>{if(__isEnglishChromePage()){try{if(!!!document.querySelector("header #brand-logo, header #mobile-menu-toggle")){const i=document.createElement("header");i.className="fixed top-0 left-0 right-0 z-40 bg-beige/95 backdrop-blur-sm border-b border-chocolate/10",i.innerHTML=`
        <nav class="max-w-7xl mx-auto px-6 lg:px-12 py-6 flex items-center justify-between gap-2">
            <a href="/" id="brand-logo" class="text-lg sm:text-xl font-semibold text-indigodeep hover:text-chocolate transition-colors focus:outline-none focus:ring-2 focus:ring-indigodeep focus:ring-offset-2 focus:ring-offset-beige rounded inline-flex items-center shrink min-w-0" aria-label="Go to Portfolio home page">
                <img src="/assets/img/logo-ea.webp" alt="Estivan Ayramia logo" class="h-8 w-8 mr-2 object-contain shrink-0" width="300" height="264" fetchpriority="high">
                <span translate="no" class="notranslate truncate">Estivan Ayramia</span>
            </a>
            
            <!-- Main Navigation -->
            <ul class="hidden md:flex items-center space-x-8">
                <li><a href="/" class="text-sm text-chocolate hover:text-indigodeep transition-colors focus:outline-none focus:ring-2 focus:ring-indigodeep focus:ring-offset-2 focus:ring-offset-beige rounded" data-nav-key="home">Home</a></li>
                <li><a href="/projects/" class="text-sm text-chocolate hover:text-indigodeep transition-colors focus:outline-none focus:ring-2 focus:ring-indigodeep focus:ring-offset-2 focus:ring-offset-beige rounded" data-nav-key="projects">Projects</a></li>
                <li><a href="/overview" class="text-sm text-chocolate hover:text-indigodeep transition-colors focus:outline-none focus:ring-2 focus:ring-indigodeep focus:ring-offset-2 focus:ring-offset-beige rounded" data-nav-key="overview">Overview</a></li>
                <li><a href="/deep-dive" class="text-sm text-chocolate hover:text-indigodeep transition-colors focus:outline-none focus:ring-2 focus:ring-indigodeep focus:ring-offset-2 focus:ring-offset-beige rounded" data-nav-key="deep-dive">Deep Dive</a></li>
                <li><a href="/about" class="text-sm text-chocolate hover:text-indigodeep transition-colors focus:outline-none focus:ring-2 focus:ring-indigodeep focus:ring-offset-2 focus:ring-offset-beige rounded" data-nav-key="about">About</a></li>
                <li><a href="/contact" class="text-sm font-medium text-beige bg-indigodeep border border-white/20 px-5 py-2 rounded-full hover:bg-chocolate transition-colors dark:bg-indigodeep dark:text-beige dark:hover:bg-white dark:hover:text-indigodeep dark:border-white/20 focus:outline-none focus:ring-2 focus:ring-indigodeep focus:ring-offset-2 focus:ring-offset-beige" data-nav-key="contact">Contact</a></li>
            </ul>
            
            <!-- Language Switcher -->
            <div id="lang-switcher" class="flex items-center space-x-3 shrink-0" style="z-index: 20;">
                <a href="#" class="text-xs font-semibold text-indigodeep underline focus:outline-none focus:ring-2 focus:ring-indigodeep focus:ring-offset-2 focus:ring-offset-beige rounded" data-lang-key="en">EN</a>
                <a href="/es/" class="text-xs text-chocolate hover:text-indigodeep transition-colors focus:outline-none focus:ring-2 focus:ring-indigodeep focus:ring-offset-2 focus:ring-offset-beige rounded">ES</a>
                <a href="/ar/" class="text-xs text-chocolate hover:text-indigodeep transition-colors focus:outline-none focus:ring-2 focus:ring-indigodeep focus:ring-offset-2 focus:ring-offset-beige rounded">AR</a>
            </div>
            
            <!-- Dark Mode Toggle -->
            <button type="button" id="theme-toggle" class="text-base font-medium text-beige bg-indigodeep border border-white/20 px-5 py-2 rounded-full hover:bg-chocolate transition-colors dark:bg-indigodeep dark:text-beige dark:hover:bg-white dark:hover:text-indigodeep dark:border-white/20 focus:outline-none focus:ring-2 focus:ring-indigodeep focus:ring-offset-2 focus:ring-offset-beige" aria-label="Switch to light mode"><span style="color: #e1d4c2">\u{1F506}</span></button>
            
            <!-- Mobile Menu Toggle -->
            <button type="button" id="mobile-menu-toggle" class="md:hidden text-chocolate focus:outline-none focus:ring-2 focus:ring-indigodeep focus:ring-offset-2 focus:ring-offset-beige rounded p-2" aria-label="Toggle mobile menu" aria-expanded="false">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
                </svg>
            </button>
        </nav>
        
        <!-- Mobile Menu -->
        <div id="mobile-menu" class="hidden md:hidden border-t border-chocolate/10 bg-beige">
            <ul class="px-6 py-4 space-y-3">
                <li><a href="/" class="block text-sm text-chocolate hover:text-indigodeep transition-colors focus:outline-none focus:ring-2 focus:ring-indigodeep focus:ring-offset-2 focus:ring-offset-beige rounded py-2" data-nav-key="home">Home</a></li>
                <li><a href="/projects/" class="block text-sm text-chocolate hover:text-indigodeep transition-colors focus:outline-none focus:ring-2 focus:ring-indigodeep focus:ring-offset-2 focus:ring-offset-beige rounded py-2" data-nav-key="projects">Projects</a></li>
                <li><a href="/overview" class="block text-sm text-chocolate hover:text-indigodeep transition-colors focus:outline-none focus:ring-2 focus:ring-indigodeep focus:ring-offset-2 focus:ring-offset-beige rounded py-2" data-nav-key="overview">Overview</a></li>
                <li><a href="/deep-dive" class="block text-sm text-chocolate hover:text-indigodeep transition-colors focus:outline-none focus:ring-2 focus:ring-indigodeep focus:ring-offset-2 focus:ring-offset-beige rounded py-2" data-nav-key="deep-dive">Deep Dive</a></li>
                <li><a href="/about" class="block text-sm text-chocolate hover:text-indigodeep transition-colors focus:outline-none focus:ring-2 focus:ring-indigodeep focus:ring-offset-2 focus:ring-offset-beige rounded py-2" data-nav-key="about">About</a></li>
                <li><a href="/contact" class="block text-sm font-medium text-beige bg-indigodeep border border-white/20 px-5 py-2 rounded-full hover:bg-chocolate transition-colors text-center dark:bg-indigodeep dark:text-beige dark:hover:bg-white dark:hover:text-indigodeep dark:border-white/20 focus:outline-none focus:ring-2 focus:ring-indigodeep focus:ring-offset-2 focus:ring-offset-beige" data-nav-key="contact">Contact</a></li>
            </ul>
        </div>
            `,document.body&&document.body.insertBefore(i,document.body.firstChild),document.querySelector("main.pt-24")||document.body&&document.body.classList&&document.body.classList.add("pt-24");try{const n=i.querySelector('[data-lang-key="en"]');if(n){const t=window.location.pathname||"/";n.href=t==="/"?"/":t.replace(/\/index\.html$/i,"/").replace(/\.html$/i,"")}}catch{}}}catch{}try{if(!!!document.querySelector("footer.bg-indigodeep.text-beige.py-12")){const i=document.createElement("footer");i.className="bg-indigodeep text-beige py-12",i.innerHTML=`
        <div class="max-w-7xl mx-auto px-6 lg:px-12">
            <div class="grid md:grid-cols-3 gap-12 mb-12">
                <div class="space-y-4">
                    <a href="/" class="flex items-center space-x-3 mb-4 hover:opacity-80 transition-opacity">
                        <img src="/assets/img/logo-ea.webp" alt="Estivan Ayramia logo" class="h-12 w-12 object-contain" width="300" height="264">
                        <h3 class="text-xl font-semibold text-white">Estivan Ayramia</h3>
                    </a>
                    <p class="text-sm text-beige/80 leading-relaxed">Chaldean from El Cajon. General Business graduate from SDSU. Building systems, working with people, and turning chaos into clean execution.</p>
                </div>
                <div class="space-y-4">
                    <h3 class="text-sm font-semibold text-white uppercase tracking-wider">Quick Links</h3>
                    <ul class="space-y-2">
                        <li><a href="/overview" class="text-sm text-beige/80 hover:text-white inline-block transition-all hover:-translate-y-1 focus:outline-none focus:ring-2 focus:ring-white focus:ring-offset-2 focus:ring-offset-indigodeep rounded">Overview</a></li>
                        <li><a href="/deep-dive" class="text-sm text-beige/80 hover:text-white inline-block transition-all hover:-translate-y-1 focus:outline-none focus:ring-2 focus:ring-white focus:ring-offset-2 focus:ring-offset-indigodeep rounded">Deep Dive</a></li>
                        <li><a href="/projects/" class="text-sm text-beige/80 hover:text-white inline-block transition-all hover:-translate-y-1 focus:outline-none focus:ring-2 focus:ring-white focus:ring-offset-2 focus:ring-offset-indigodeep rounded">Projects</a></li>
                        <li><a href="/about" class="text-sm text-beige/80 hover:text-white inline-block transition-all hover:-translate-y-1 focus:outline-none focus:ring-2 focus:ring-white focus:ring-offset-2 focus:ring-offset-indigodeep rounded">About</a></li>
                    </ul>
                </div>
                <div class="space-y-4">
                    <h3 class="text-sm font-semibold text-white uppercase tracking-wider">Connect</h3>
                    <ul class="space-y-2">
                        <li><a href="https://www.linkedin.com/in/estivanayramia" target="_blank" rel="noopener noreferrer" class="text-sm text-beige/80 hover:text-white inline-block transition-all hover:-translate-y-1 focus:outline-none focus:ring-2 focus:ring-white focus:ring-offset-2 focus:ring-offset-indigodeep rounded">LinkedIn \u2197</a></li>
                        <li><a href="https://github.com/estivanayramia/" target="_blank" rel="noopener noreferrer" class="text-sm text-beige/80 hover:text-white inline-block transition-all hover:-translate-y-1 focus:outline-none focus:ring-2 focus:ring-white focus:ring-offset-2 focus:ring-offset-indigodeep rounded">GitHub \u2197</a></li>
                        <li><a href="/contact" class="text-sm text-beige/80 hover:text-white inline-block transition-all hover:-translate-y-1 focus:outline-none focus:ring-2 focus:ring-white focus:ring-offset-2 focus:ring-offset-indigodeep rounded">Contact</a></li>
                        <li><a href="/assets/docs/Estivan-Ayramia-Resume.pdf" download="" class="text-sm text-beige/80 hover:text-white inline-block transition-all hover:-translate-y-1 focus:outline-none focus:ring-2 focus:ring-white focus:ring-offset-2 focus:ring-offset-indigodeep rounded">Resume (PDF)</a></li>
                        <li><a href="/privacy" class="text-sm text-beige/80 hover:text-white inline-block transition-all hover:-translate-y-1 focus:outline-none focus:ring-2 focus:ring-white focus:ring-offset-2 focus:ring-offset-indigodeep rounded">Privacy Policy</a></li>
                    </ul>
                </div>
            </div>
            <div class="border-t border-beige/20 pt-8 text-center">
                <p class="text-sm text-beige/80">\xA9 <span id="copyright-year">2025</span> Estivan Ayramia. All rights reserved.</p>
            </div>
        </div>
            `,document.body&&document.body.appendChild(i)}}catch{}}},__arcadeStorageKey="site_played_games_v1",__safeJsonParse=(r,i)=>{try{return JSON.parse(r)}catch{return i}},__getPlayedGames=()=>{try{const r=localStorage.getItem(__arcadeStorageKey),i=__safeJsonParse(r,{});return i&&typeof i=="object"?i:{}}catch{return{}}},__setPlayedGames=r=>{try{localStorage.setItem(__arcadeStorageKey,JSON.stringify(r||{}))}catch{}},__normalizePath=r=>{try{return(r||"/").replace(/\/+$/,"")||"/"}catch{return"/"}},__getCurrentGameId=()=>{try{const r=document.body&&document.body.getAttribute("data-arcade-achievements-filter");if(r&&/^mini_/.test(r))return r.replace(/^mini_/,"");if(r&&/^arcade_/.test(r))return r.replace(/^arcade_/,"");const i=__normalizePath(window.location.pathname||"/"),o=i.match(/^\/hobbies-games\/(.+)$/);if(o&&o[1])return o[1].replace(/\.html$/i,"");const n=i.split("/").pop()||"";return n.endsWith(".html")?n.replace(/\.html$/i,""):null}catch{return null}},__markGamePlayed=r=>{if(r)try{const i=__getPlayedGames();i[r]={lastPlayedAt:Date.now()},__setPlayedGames(i)}catch{}},__hashString=r=>{let i=2166136261;for(let o=0;o<r.length;o++)i^=r.charCodeAt(o),i=Math.imul(i,16777619);return i>>>0},__mulberry32=r=>{let i=r>>>0;return function(){i+=1831565813;let o=Math.imul(i^i>>>15,1|i);return o^=o+Math.imul(o^o>>>7,61|o),((o^o>>>14)>>>0)/4294967296}},__shuffleInPlace=(r,i)=>{for(let o=r.length-1;o>0;o--){const n=Math.floor(i()*(o+1));[r[o],r[n]]=[r[n],r[o]]}return r},__GAME_CATALOG=[{id:"snake",href:"/hobbies-games/snake",emoji:"\u{1F40D}",title:"Snake",subtitle:"Classic growth game"},{id:"breaker",href:"/hobbies-games/block-breaker",emoji:"\u{1F9F1}",title:"Block Breaker",subtitle:"Smash the bricks"},{id:"2048",href:"/hobbies-games/2048",emoji:"\u{1F9E9}",title:"2048",subtitle:"Merge the numbers"},{id:"invaders",href:"/hobbies-games/space-invaders",emoji:"\u{1F47E}",title:"Space Invaders",subtitle:"Defend the earth"},{id:"racer",href:"/hobbies-games/racer",emoji:"\u{1F3CE}\uFE0F",title:"Racer",subtitle:"Fast reflex racing"},{id:"oh-flip",href:"/hobbies-games/oh-flip",emoji:"\u{1F938}",title:"Oh Flip",subtitle:"Timing + tricks"},{id:"onoff",href:"/hobbies-games/onoff",emoji:"\u26A1",title:"ON/OFF",subtitle:"Switch-based puzzle"},{id:"1024-moves",href:"/hobbies-games/1024-moves",emoji:"\u{1F9E0}",title:"1024 Moves",subtitle:"Move-limited strategy"},{id:"nano-wirebot",href:"/hobbies-games/nano-wirebot",emoji:"\u{1F916}",title:"Nano Wirebot",subtitle:"Precision platforming"},{id:"off-the-line",href:"/hobbies-games/off-the-line",emoji:"\u{1F9F7}",title:"Off The Line",subtitle:"Don\u2019t cross the line"},{id:"pizza-undelivery",href:"/hobbies-games/pizza-undelivery",emoji:"\u{1F355}",title:"Pizza Undelivery",subtitle:"Fast food chaos"},{id:"the-matr13k",href:"/hobbies-games/the-matr13k",emoji:"\u{1F9EC}",title:"The Matr13k",subtitle:"Pattern puzzle"},{id:"triangle-back-to-home",href:"/hobbies-games/triangle-back-to-home",emoji:"\u{1F53A}",title:"Triangle: Back to Home",subtitle:"Geometry adventure"},{id:"xx142-b2exe",href:"/hobbies-games/xx142-b2exe",emoji:"\u{1F9EA}",title:"XX142-B2EXE",subtitle:"Experimental arcade"}],__renderSuggestionGrid=(r,i)=>{if(!r)return;const o=i&&i.count?i.count:6,n=i&&i.currentId?i.currentId:null,t=__getPlayedGames(),e=Date.now(),s=__GAME_CATALOG.filter(_=>_&&_.id&&_.href&&_.id!==n),c=s.filter(_=>!t[_.id]),g=s.filter(_=>!!t[_.id]),u=Math.floor(e/864e5),T=parseInt(sessionStorage.getItem("site_suggest_nonce")||"0",10)||0;sessionStorage.setItem("site_suggest_nonce",String(T+1));const I=u*1e3+T+__hashString(String(window.location.pathname||"/")),p=__mulberry32(I);__shuffleInPlace(c,p),g.sort((_,B)=>{const a=t[_.id]&&t[_.id].lastPlayedAt?t[_.id].lastPlayedAt:0,z=t[B.id]&&t[B.id].lastPlayedAt?t[B.id].lastPlayedAt:0;return a-z}),__shuffleInPlace(g,p);const S=[];for(const _ of c){if(S.length>=o)break;S.push(_)}for(const _ of g){if(S.length>=o)break;S.push(_)}const h="flex flex-col items-center p-4 bg-white/5 rounded-xl hover:bg-white/10 transition-all group border border-white/5 hover:border-white/20",m="text-4xl mb-3 group-hover:scale-110 transition-transform";r.innerHTML=S.map(_=>`
        <a href="${_.href}" class="${h}" data-game-id="${_.id}">
            <div class="${m}">${_.emoji||"\u{1F3AE}"}</div>
            <div class="font-bold text-sm">${_.title||_.id}</div>
            <div class="text-xs opacity-60 mt-1">${_.subtitle||""}</div>
        </a>
    `).join("")},__initDynamicGameSuggestions=()=>{try{const r=__getCurrentGameId();r&&__markGamePlayed(r);const i=new Set;document.querySelectorAll('a[class*="bg-white/5"][class*="rounded-xl"][class*="hover:bg-white/10"]').forEach(o=>{const n=o.closest(".grid");n&&i.add(n)}),i.forEach(o=>{const n=o.querySelectorAll("a");!n||n.length<4||__renderSuggestionGrid(o,{count:6,currentId:r})})}catch{}},init=()=>{console.log("%c Designed by Estivan Ayramia ","background: #212842; color: #e1d4c2; padding: 4px; border-radius: 4px;"),document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>{__ensureStandardEnglishChrome(),initDarkMode(),initAriaCurrent(),initMobileMenu(),__initDynamicGameSuggestions(),loadGSAPAndInit(),initSmoothScroll(),initFormValidation(),initLazyLoading(),initScrollToTop(),initPdfPreviews(),initAchievements(),initKonamiCode(),initPWA(),initAnalytics(),initPerformanceMonitoring(),initPhase2()}):(__ensureStandardEnglishChrome(),initDarkMode(),initAriaCurrent(),initMobileMenu(),__initDynamicGameSuggestions(),loadGSAPAndInit(),initSmoothScroll(),initFormValidation(),initLazyLoading(),initScrollToTop(),initPdfPreviews(),initAchievements(),initKonamiCode(),initPWA(),initAnalytics(),initPerformanceMonitoring(),initPhase2())};init(),document.addEventListener("DOMContentLoaded",()=>{const r="/api/chat",i="/assets/docs/Estivan-Ayramia-Resume.pdf",o="https://www.linkedin.com/in/estivanayramia";if(document.body.hasAttribute("data-disable-floating-ui"))return;const t={logistics:{title:"Logistics System",summary:"A systems-focused project centered on execution, coordination, and operational clarity.",img:"/assets/img/project-logistics.jpg",link:"/projects/logistics"},conflict:{title:"Conflict Playbook",summary:"A practical framework for navigating conflict with structure, empathy, and outcomes.",img:"/assets/img/project-conflict.jpg",link:"/deep-dive#conflict"},discipline:{title:"Discipline Routine",summary:"A repeatable routine and mindset system for sustainable discipline and follow-through.",img:"/assets/img/project-discipline.jpg",link:"/projects/discipline"},website:{title:"Portfolio Website",summary:"The site you are on, built for speed, clarity, and a clean browsing experience.",img:"/assets/img/og-image.png",link:"/"}},e={widget:document.getElementById("chat-widget"),window:document.getElementById("chat-window"),header:document.getElementById("chat-header"),messages:document.getElementById("chat-messages"),input:document.getElementById("chat-input"),sendBtn:document.getElementById("send-btn"),toggleBtn:document.getElementById("chat-toggle"),closeBtn:document.getElementById("close-chat"),bubble:document.getElementById("welcome-bubble"),chipsContainer:document.getElementById("chat-chips"),suggestionsBtn:document.getElementById("suggestions-btn"),suggestionsContainer:document.querySelector('[data-chat-suggestions="container"]'),suggestionsToggle:document.querySelector('[data-chat-suggestions-toggle="button"]'),suggestionsClose:null};(function(){try{if(window.CSS&&CSS.supports&&CSS.supports("animation-timeline","scroll()"))return}catch{}const l=document.querySelector(".scroll-progress");if(!l)return;let v=!1;function L(){const x=document.documentElement,y=window.scrollY||x.scrollTop||0,E=Math.max((x.scrollHeight||document.body.scrollHeight||0)-window.innerHeight,0),C=E>0?Math.min(1,Math.max(0,y/E)):0;l.style.setProperty("--scroll-scale",C),v=!1}const A=function(){v||(v=!0,requestAnimationFrame(L))};window.addEventListener("scroll",A,{passive:!0}),window.addEventListener("resize",A,{passive:!0}),requestAnimationFrame(L)})();const s=document.documentElement.lang||"en";s==="ar"&&e.widget?(e.widget.style.left="1rem",e.widget.style.right="auto",e.bubble&&(e.bubble.style.left="1rem",e.bubble.style.right="auto")):e.widget&&(e.widget.style.right="1rem",e.widget.style.left="auto",e.bubble&&(e.bubble.style.right="1rem",e.bubble.style.left="auto"));let c=[],g=!1,u=null,T=!1,I=[],p=document.documentElement.lang||"en",S=0,h=0;const m=`savonie_history:v1:${s||"en"}`,_=50;function B(){try{const d=[],l=window.location.pathname||"/";d.push(`path: ${l}`),d.push(`title: ${document.title||""}`);const v=Array.from(document.querySelectorAll("h1, h2")).map(A=>(A.textContent||"").trim()).filter(Boolean).slice(0,10);v.length&&(d.push("headings:"),v.forEach(A=>d.push(`- ${A}`)));const L=d.join(`
`);return L.length>3500?L.slice(0,3500):L}catch{return`${window.location.pathname||"/"} | ${document.title||""}`}}try{const d=sessionStorage.getItem(m);d&&(c=JSON.parse(d),c.forEach(l=>{if(l&&l.kind==="card"){Y(l.cardId);return}if(!l||l.kind!=="text")return;const v=document.createElement("div"),L="bg-[#212842] text-white rounded-tr-none self-end ml-auto",A="bg-white text-[#362017] rounded-tl-none border border-[#362017]/5 self-start";v.className=`p-3 rounded-lg shadow-sm max-w-[85%] mb-3 text-sm leading-relaxed ${l.sender==="user"?L:A}`,l.sender==="bot"?v.replaceChildren(F(l.text)):v.textContent=l.text,e.messages?.appendChild(v)}),setTimeout(()=>{e.messages&&(e.messages.scrollTop=e.messages.scrollHeight)},100))}catch{}if(c.length===0){const d=document.documentElement.lang||"en",l=translations.chat.welcome[d]||"Hello! I am Savonie. Ask me anything about Estivan.";P(l,"bot",!1)}e.chipsContainer&&(p=document.documentElement.lang||"en",I=translations.chat.defaultChips[p]||translations.chat.defaultChips.en,q()),T=!0;const a=parseInt(sessionStorage.getItem("savonie_bubble_count")||"0");a<2&&setTimeout(()=>{e.window?.classList.contains("hidden")&&c.length===0&&(e.bubble?.classList.remove("opacity-0","translate-y-4"),e.bubble?.classList.add("opacity-100","translate-y-0"),sessionStorage.setItem("savonie_bubble_count",(a+1).toString()))},2500),e.toggleBtn?.addEventListener("click",w),e.closeBtn?.addEventListener("click",w),e.sendBtn?.addEventListener("click",H),e.input?.addEventListener("keydown",d=>{d.key!=="Enter"||d.target&&d.target.tagName==="TEXTAREA"&&d.shiftKey||(d.preventDefault(),H())});function z(d){if(!e.suggestionsContainer){console.log("[Savonie DEBUG] setSuggestionsVisible called but no suggestions container");return}d?(e.suggestionsContainer.classList.remove("savonie-suggestions-hidden"),e.suggestionsContainer.removeAttribute("hidden"),e.suggestionsContainer.style.display="flex"):(e.suggestionsContainer.classList.add("savonie-suggestions-hidden"),e.suggestionsContainer.setAttribute("hidden","true"),e.suggestionsContainer.style.display="none"),console.log("[Savonie DEBUG] setSuggestionsVisible ->",d,"classes:",e.suggestionsContainer.className)}function J(){if(!e.suggestionsContainer){console.log("[Savonie DEBUG] No suggestions container found on this page");return}e.suggestionsToggle?e.suggestionsToggle.addEventListener("click",()=>{const l=e.suggestionsContainer.classList.contains("savonie-suggestions-hidden")||e.suggestionsContainer.hasAttribute("hidden")||e.suggestionsContainer.style.display==="none";console.log("[Savonie DEBUG] Lightbulb clicked, nextVisible =",l),z(l)}):console.log("[Savonie DEBUG] No suggestions toggle (lightbulb) found"),console.log("[Savonie DEBUG] attachSuggestionHandlers complete")}J(),e.chipsContainer&&e.chipsContainer.querySelectorAll(".chip-btn").forEach(d=>{d.addEventListener("click",()=>{e.input&&(e.input.value=d.textContent,H())})});const R=document.getElementById("mic-btn");let O=null,G=!1;if(R&&("webkitSpeechRecognition"in window||"SpeechRecognition"in window)){const d=window.SpeechRecognition||window.webkitSpeechRecognition;O=new d,O.continuous=!1,O.interimResults=!1,O.lang=document.documentElement.lang||"en-US",O.onstart=()=>{G=!0,R.classList.add("listening"),R.setAttribute("aria-label","Listening...")},O.onend=()=>{G=!1,R.classList.remove("listening"),R.setAttribute("aria-label","Voice input")},O.onresult=l=>{const v=l.results[0][0].transcript;if(e.input&&v){e.input.value=v;try{e.input.focus({preventScroll:!0})}catch{e.input.focus()}}},O.onerror=l=>{console.warn("Speech recognition error:",l.error),G=!1,R.classList.remove("listening")},R.addEventListener("click",()=>{G?O.stop():O.start()})}else R&&(R.style.display="none");function V(d){const l=[],v=[...d].reverse().find(E=>E.sender==="user")?.text?.toLowerCase()||"",L=[...d].reverse().find(E=>E.sender==="bot")?.text?.toLowerCase()||"",A=$(v),x=translations.chat.contextualSuggestions,y=v+" "+L;return y.match(/skill|technology|expertise|proficiency|technical|programming|coding|developer|engineer|habilidad|tecnología|experiencia|programación|مهارة|تكنولوجيا|خبرة|برمجة/i)?l.push(...x[A]?.skills||x.en.skills):y.match(/background|experience|career|journey|history|education|degree|university|studied|fondo|experiencia|carrera|educación|universidad|خلفية|خبرة|مسيرة|تعليم|جامعة/i)?l.push(...x[A]?.background||x.en.background):y.match(/project|portfolio|work|built|created|developed|application|website|system|proyecto|trabajo|portafolio|construido|desarrollado|aplicación|مشروع|عمل|محفظة|بنى|طور/i)?l.push(...x[A]?.projects||x.en.projects):y.match(/contact|reach|email|connect|hire|available|freelance|contacto|alcanzar|correo|conectar|contratar|disponible|اتصال|الوصول|بريد|توظيف|متاح/i)?l.push(...x[A]?.contact||x.en.contact):y.match(/education|study|learn|course|certification|degree|training|class|educación|estudio|aprender|curso|certificación|grado|تعليم|دراسة|تعلم|دورة|شهادة/i)?l.push(...x[A]?.education||x.en.education):L.match(/project|portfolio|application|system|website|built|created|developed|proyecto|aplicación|sistema|construido|desarrollado|مشروع|محفظة|بنى|طور/i)?l.push(...x[A]?.projectResponse||x.en.projectResponse):L.match(/skill|technology|proficiency|expertise|language|framework|tool|habilidad|tecnología|lenguaje|herramienta|مهارة|تكنولوجيا|لغة|أداة/i)?l.push(...x[A]?.skillResponse||x.en.skillResponse):d.length<4&&l.push(...x[A]?.early||x.en.early),l.length===0&&l.push(...x[A]?.early||x.en.early),l.slice(0,5)}function $(d){return d?/[\u0600-\u06FF]/.test(d)?"ar":/\b(qué|como|dónde|cuándo|por qué|está|son|tiene|trabajo|habilidades?|experiencia|proyecto|contacto)\b/i.test(d)?"es":"en":"en"}function b(d){const l=document.createDocumentFragment();if(!d)return l;const v=y=>{try{const E=String(y).trim();if(E.startsWith("/"))return E;const C=new URL(E);return C.protocol!=="http:"&&C.protocol!=="https:"?null:C.toString()}catch{return null}},L=(y,E)=>{const C=document.createElement("a");C.href=y;const f=y.startsWith("/");return C.target=f?"_self":"_blank",f||(C.rel="noopener noreferrer"),C.className="text-[#212842] underline hover:text-[#362017] font-medium",C.textContent=E,C},A=(y,E)=>{const C=/\[([^\]]+)\]\(([^)\s]+)\)|\bhttps?:\/\/[^\s<]+/g,f=String(E);let k=0,M;for(;(M=C.exec(f))!==null;){if(M.index>k&&y.appendChild(document.createTextNode(f.slice(k,M.index))),M[1]&&M[2]){const N=v(M[2]);N?y.appendChild(L(N,M[1])):y.appendChild(document.createTextNode(M[0]))}else{const N=v(M[0]);N?y.appendChild(L(N,M[0])):y.appendChild(document.createTextNode(M[0]))}k=C.lastIndex}k<f.length&&y.appendChild(document.createTextNode(f.slice(k)))},x=String(d).split(/\n/);for(let y=0;y<x.length;y++)A(l,x[y]),y<x.length-1&&l.appendChild(document.createElement("br"));return l}function D(d){const l=document.createElement("template");l.innerHTML=String(d||"");const v=new Set(["P","BR","STRONG","EM","CODE","PRE","UL","OL","LI","A","BLOCKQUOTE"]),L=x=>{if(!x)return null;const y=String(x).trim();if(y.startsWith("/"))return y;try{const E=new URL(y);return E.protocol==="http:"||E.protocol==="https:"?E.toString():null}catch{return null}},A=x=>{const y=Array.from(x.childNodes);for(const E of y)if(E.nodeType===Node.ELEMENT_NODE){const C=E,f=C.tagName,k=f==="A"?C.getAttribute("href"):null;if(!v.has(f)){const N=document.createTextNode(C.textContent||"");C.replaceWith(N);continue}const M=Array.from(C.attributes);for(const N of M)C.removeAttribute(N.name);if(f==="A"){const N=L(k);if(!N){const U=document.createTextNode(C.textContent||"");C.replaceWith(U);continue}C.setAttribute("href",N),N.startsWith("/")?C.setAttribute("target","_self"):(C.setAttribute("target","_blank"),C.setAttribute("rel","noopener noreferrer")),C.className="text-[#212842] underline hover:text-[#362017] font-medium"}A(C)}};return A(l.content),l.content}function F(d){const l=String(d||""),v=typeof window<"u"&&window.marked&&typeof window.marked.parse=="function"?window.marked:null;if(!v)return b(l);const L=l.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");try{const A=v.parse(L);return D(A)}catch{return b(l)}}window.__savonieXssSelfTest=function(){const l=["<img src=x onerror=alert(1)>","[bad](javascript:alert(1))","[ok](https://example.com)","https://example.com/test?x=<script>alert(1)<\/script>",`Line 1
Line 2 with https://example.com`].map(v=>{const L=document.createElement("div");return L.appendChild(b(v)),L.innerHTML});return console.log("[Savonie] XSS self-test rendered HTML:",l),l};function q(d=null){if(!e.chipsContainer)return;d&&Array.isArray(d)&&(I=d),p=document.documentElement.lang||"en";const l=translations.chat.pinnedChips[p]||translations.chat.pinnedChips.en,v=l.map(k=>k.toLowerCase()),A=[...I.filter(k=>!v.includes(k.toLowerCase())),...l];if(e.chipsContainer.innerHTML="",A.length===0){z(!1);return}const x=["Projects","View Projects","Projects","View projects","Proyectos","Ver proyectos","\u0645\u0634\u0627\u0631\u064A\u0639","\u0639\u0631\u0636 \u0627\u0644\u0645\u0634\u0627\u0631\u064A\u0639"],y=["Resume","Download Resume","View Resume","Get resume","Curr\xEDculum","Descargar curr\xEDculum","\u0627\u0644\u0633\u064A\u0631\u0629 \u0627\u0644\u0630\u0627\u062A\u064A\u0629","\u062A\u062D\u0645\u064A\u0644 \u0627\u0644\u0633\u064A\u0631\u0629"],E=["Contact","Email","Email Estivan","Contact Estivan","Contacto","Correo electr\xF3nico","\u0627\u062A\u0635\u0627\u0644","\u0627\u0644\u0628\u0631\u064A\u062F \u0627\u0644\u0625\u0644\u0643\u062A\u0631\u0648\u0646\u064A"],C=["LinkedIn","Open LinkedIn"];A.forEach(k=>{const M=document.createElement("button"),j=l.some(U=>U.toLowerCase()===k.toLowerCase())?"font-medium":"";M.className=`chip-btn text-xs bg-white border border-[#212842]/20 text-[#212842] px-3 py-1 rounded-full hover:bg-[#212842] hover:text-white transition-colors ${j}`,M.textContent=k,M.addEventListener("click",()=>{if(x.includes(k)){window.location.href="/projects/",I=translations.chat.pinnedFollowUps[p]?.projects||translations.chat.pinnedFollowUps.en.projects,q();return}if(y.includes(k)){try{window.open(i,"_blank","noopener")}catch{}I=translations.chat.pinnedFollowUps[p]?.resume||translations.chat.pinnedFollowUps.en.resume,q();return}if(E.includes(k)){window.location.href="/contact",I=translations.chat.pinnedFollowUps[p]?.contact||translations.chat.pinnedFollowUps.en.contact,q();return}if(C.includes(k)){try{window.open(o,"_blank","noopener")}catch{}return}if(k==="Continue reading..."){H("Continue",u);return}e.input&&(e.input.value=k,setTimeout(()=>{e.input&&(e.input.value="")},0),H())}),e.chipsContainer.appendChild(M)});const f=document.createElement("button");f.className="chip-close-btn text-xs text-[#362017]/60 hover:text-[#362017] px-2 py-1 ml-2 transition-colors",f.setAttribute("data-chat-suggestions-close","button"),f.innerHTML="\xD7",f.title="Hide suggestions",f.addEventListener("click",k=>{k.preventDefault(),k.stopPropagation(),console.log("[Savonie DEBUG] Suggestions close X clicked, hiding suggestions"),z(!1)}),e.chipsContainer.appendChild(f),e.suggestionsClose=f,z(!0)}function w(){const d=e.window?.classList.contains("hidden"),l=document.documentElement.dir==="rtl";if(d?(e.window?.classList.remove("hidden"),e.window?.classList.add("flex"),typeof clarity=="function"&&clarity("event","chat_open"),typeof gtag=="function"&&gtag("event","chat_open",{event_category:"Chatbot"})):(e.window?.classList.remove("flex"),e.window?.classList.add("hidden"),typeof clarity=="function"&&clarity("event","chat_close"),typeof gtag=="function"&&gtag("event","chat_close",{event_category:"Chatbot"})),!e.window?.classList.contains("hidden")){if(d){const v=e.widget?.getBoundingClientRect();if(v){let y=v.left/16,E=v.top/16-31.25-1;y+20>window.innerWidth/16&&(y=window.innerWidth/16-20-1),y<1&&(y=1),E<1&&(E=1),e.window.style.position="fixed",e.window.style.left=`${y}rem`,e.window.style.top=`${E}rem`,e.window.style.right="auto",e.window.style.zIndex="10000"}else e.window.style.position="",e.window.style.left="",e.window.style.top="",e.window.style.right="",e.window.style.zIndex=""}e.bubble&&(e.bubble.style.display="none"),setTimeout(()=>{try{e.input?.focus({preventScroll:!0})}catch{e.input?.focus&&e.input.focus()}e.messages&&(e.messages.scrollTop=e.messages.scrollHeight)},100)}}async function W(){if(navigator.onLine)return!0;try{const d=new AbortController,l=setTimeout(()=>d.abort(),3e3),v=await fetch("/favicon.ico",{method:"HEAD",cache:"no-cache",signal:d.signal});return clearTimeout(l),v.ok}catch{return!1}}async function H(d=null,l=null){if(!e.input)return;const v=typeof d=="string"?d:e.input.value.trim();if(!v||g)return;g=!0,S++;const L=S;if(h=L,typeof gtag=="function"&&gtag("event","chat_question",{event_category:"Chatbot",event_label:"User Asked Question"}),typeof clarity=="function"&&clarity("event","chat_question"),!await W()){P(v,"user"),d||(e.input.value=""),P("You appear to be offline. Please check your connection and try again.","bot"),g=!1;return}P(v,"user"),d||(e.input.value="");const x=P("Thinking...","bot",!0),y=3e4,E=2;let C=null,f=null;for(let k=0;k<=E;k++){const M=new AbortController,N=setTimeout(()=>M.abort(),y);try{const j=await fetch(r,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:v,pageContent:B(),language:s,previousContext:l||null}),signal:M.signal});if(clearTimeout(N),console.log("[Chat Debug] Fetch completed. Status:",j.status,"OK:",j.ok),!j.ok){try{const U=await j.json();if(U&&U.errorType){f=U,C=null;break}}catch{}if(j.status>=500||j.status===503||j.status===504){if(C={type:"server",status:j.status},k<E){await new Promise(U=>setTimeout(U,1e3*(k+1)));continue}}else if(j.status===429){C={type:"rate_limit"};break}else{C={type:"client",status:j.status};break}}f=await j.json(),console.log("[Chat Debug] Response parsed successfully:",f),C=null;break}catch(j){if(clearTimeout(N),j.name==="AbortError"){if(C={type:"timeout"},k<E)continue}else if(C={type:"network",message:j.message},k<E){await new Promise(U=>setTimeout(U,1e3*(k+1)));continue}}}if(C){X(x);let k;switch(C.type){case"timeout":k="The request took too long. The AI service might be busy. Please try again in a moment.";break;case"rate_limit":k="Too many requests. Please wait a moment before sending another message.";break;case"server":k="The AI service is temporarily unavailable. Please try again in a few seconds.";break;case"network":k="Connection lost. Please check your internet connection and try again.";break;default:k="Something went wrong. Please try again."}P(k,"bot"),g=!1;return}if(X(x),console.log("[Chat Debug] Processing response. Data structure:",{hasData:!!f,hasErrorType:!!(f&&f.errorType),hasReply:!!(f&&f.reply)}),f&&f.errorType){let k="Something went wrong. Please try again.",M=!1,N=0;if(f.errorType==="RateLimit"?k="Too many requests. Please wait a moment before trying again.":f.errorType==="BadRequest"?k="Please rephrase your question and try again.":f.errorType==="UpstreamError"?k="The AI service is temporarily unavailable. Please try again in a moment.":f.errorType==="UpstreamBusy"?(k="The AI service is experiencing high demand. Retrying automatically in 30 seconds...",M=!0,N=3e4):f.errorType==="AuthError"?k="The AI service is having configuration issues. Please try again later or explore projects directly.":f.errorType==="Timeout"?k="The request timed out. Please try again with a shorter question.":f.errorType==="OfflineMode"&&(k=null),k&&P(k,"bot"),f.errorType!=="OfflineMode"){if(e.chipsContainer){const j=["Retry"];if(I.length>0&&!I.includes("Retry")){const U=["Retry",...I];q(U)}else q(j)}else q();M&&setTimeout(()=>{H(v,l)},N),g=!1;return}}if(console.log("[Chat Debug] About to check reply. data.reply exists:",!!f.reply,"Value:",f.reply?f.reply.substring(0,100)+"...":"undefined"),f.reply&&(f.reply=f.reply.replace(/\n?\s*\{\s*"(reply|chips|action|card|errorType)"[\s\S]*$/,"").trim(),P(f.reply,"bot")),f.truncated&&(f.continuation_hint||f.reply)?(u=f.continuation_hint||f.reply.slice(-800),f.chips||(f.chips=[]),f.chips=f.chips.filter(k=>k!=="Continue reading..."),f.chips.unshift("Continue reading...")):u=null,L!==h){console.log("[Chat Debug] Ignoring stale response from request",L),g=!1;return}if(f.chips&&Array.isArray(f.chips)&&e.chipsContainer){const M=(translations.chat.pinnedChips[p]||translations.chat.pinnedChips.en).map(j=>j.toLowerCase());f.chips.every(j=>M.includes(j.toLowerCase()))&&f.chips.length>0?(console.log("[Chat Debug] Response contains only pinned chips, keeping existing dynamic chips"),q()):q(f.chips)}else if(!f.chips&&c.length>0){const k=V(c);k.length>0&&e.chipsContainer?q(k):q()}else q();if(f.action){if(f.action==="download_resume")try{window.open(i,"_blank","noopener")}catch{const M=document.createElement("a");M.href=i,M.target="_blank",M.rel="noopener noreferrer",M.download="Estivan-Ayramia-Resume.pdf",M.style.display="none",document.body.appendChild(M),M.click(),document.body.removeChild(M)}else if(f.action==="email_link")window.location.href="mailto:hello@estivanayramia.com";else if(f.action==="open_linkedin")try{window.open(o,"_blank","noopener")}catch{}}f.card&&Y(f.card),g=!1}function P(d,l,v=!1){if(!e.messages)return;const L=document.createElement("div");L.id=v?"loading-msg":"";const A="bg-[#212842] text-white rounded-tr-none self-end ml-auto",x="bg-white text-[#362017] rounded-tl-none border border-[#362017]/5 self-start";if(L.className=`p-3 rounded-lg shadow-sm max-w-[70%] mb-3 text-sm leading-relaxed ${l==="user"?A:x}`,e.messages.appendChild(L),l==="bot"&&!v){let y=0;L.textContent="";const E=setInterval(()=>{y<d.length?(L.textContent+=d[y],y++,e.messages.scrollTop=e.messages.scrollHeight):(clearInterval(E),L.replaceChildren(F(d)),e.messages.scrollTop=e.messages.scrollHeight)},12)}else l==="bot"?L.replaceChildren(F(d)):L.textContent=d;return!v&&T&&(c.push({kind:"text",text:d,sender:l}),c.length>_&&(c=c.slice(c.length-_)),sessionStorage.setItem(m,JSON.stringify(c))),e.messages.scrollTop=e.messages.scrollHeight,L.id}function Y(d){if(!e.messages||!t[d])return;const l=t[d],v=document.createElement("div");v.className="bg-white rounded-lg shadow-md overflow-hidden border border-[#362017]/10 mb-3 max-w-[85%] self-start";const L=document.createElement("div");L.className="p-3";const A=document.createElement("h4");A.className="font-semibold text-[#212842] mb-1",A.textContent=l.title;const x=document.createElement("p");x.className="text-xs text-[#362017]/80 mb-3 leading-relaxed",x.textContent=l.summary||"";const y=document.createElement("a");if(y.href=l.link,y.className="inline-block bg-[#212842] text-white px-4 py-2 rounded-lg text-sm hover:bg-[#362017] transition-colors",y.textContent="View",L.appendChild(A),l.summary&&L.appendChild(x),L.appendChild(y),l.img){const E=document.createElement("img");E.src=l.img,E.alt=l.title,E.className="w-full h-32 object-cover",E.addEventListener("error",()=>{try{E.remove()}catch{}}),v.appendChild(E)}v.appendChild(L),e.messages.appendChild(v),e.messages.scrollTop=e.messages.scrollHeight,T&&(c.push({kind:"card",cardId:d}),c.length>_&&(c=c.slice(c.length-_)),sessionStorage.setItem(m,JSON.stringify(c)))}function X(d){const l=document.getElementById(d);l&&l.remove()}if(e.header&&e.window){let d=!1,l,v,L,A;const x=document.documentElement.dir==="rtl";e.header.style.cursor="move",e.header.addEventListener("mousedown",y=>{if(y.target.closest("#close-chat"))return;d=!0,l=y.clientX,v=y.clientY;const E=e.window.getBoundingClientRect();if(L=E.left,A=E.top,e.header.style.cursor="grabbing",document.body.style.userSelect="none",e.window.style.position!=="fixed"){if(e.window.style.position="fixed",x){const C=window.innerWidth-E.right;e.window.style.right=`${C}px`,e.window.style.left="auto"}else e.window.style.left=`${L}px`;e.window.style.top=`${A}px`,e.window.style.zIndex="10000"}}),document.addEventListener("mousemove",y=>{if(!d)return;y.preventDefault();const E=y.clientX-l,C=y.clientY-v,f=e.window.offsetWidth,k=e.window.offsetHeight,M=10;if(x){let j=window.innerWidth-L-f-E;j=Math.max(M,Math.min(j,window.innerWidth-f-M)),e.window.style.right=`${j}px`,e.window.style.left="auto"}else{let j=L+E;j=Math.max(M,Math.min(j,window.innerWidth-f-M)),e.window.style.left=`${j}px`,e.window.style.right="auto"}let N=A+C;N=Math.max(M,Math.min(N,window.innerHeight-k-M)),e.window.style.top=`${N}px`}),document.addEventListener("mouseup",()=>{d&&(d=!1,e.header.style.cursor="move",document.body.style.userSelect="")})}document.addEventListener("keydown",d=>{d.key==="Escape"&&!e.window?.classList.contains("hidden")&&w(),(d.ctrlKey||d.metaKey)&&d.key==="k"&&(d.preventDefault(),w())})}),document.addEventListener("DOMContentLoaded",()=>{const r=()=>{const o=document.createElement("div");o.className="rounded-xl border border-chocolate/20 bg-white/40 overflow-hidden p-8 text-center";const n=document.createElement("p");return n.className="text-sm text-chocolate/70",n.textContent="Inline PDF preview may be blocked by hosting or browser settings. Use the buttons below to open or download the deck.",o.appendChild(n),o},i=(o,n)=>{if(!o||!n||o.dataset.pdfLoaded)return;o.innerHTML="";const t=document.createElement("div");t.className="py-12 text-sm text-chocolate/60",t.textContent="Attempting to load inline preview\u2026",o.appendChild(t);const e=document.createElement("iframe");e.src=n,e.title="PDF preview",e.style.width="100%",e.style.height="480px",e.style.border="0",e.loading="lazy";let s=!1;const c=setTimeout(()=>{s=!0,console.log("PDF load timeout - assuming success");try{t.remove()}catch{}o.contains(e)||o.appendChild(e),o.dataset.pdfLoaded="true"},5e3),g=()=>{clearTimeout(c);try{e.remove()}catch{}o.innerHTML="",o.appendChild(r()),o.dataset.pdfLoaded="false"};e.addEventListener("load",()=>{clearTimeout(c);try{try{t.remove()}catch{}o.contains(e)||o.appendChild(e),o.dataset.pdfLoaded="true"}catch{g()}}),e.addEventListener("error",g),o.appendChild(e)};document.querySelectorAll(".preview-toggle").forEach(o=>{const n=o.closest("section"),t=n&&n.querySelector(".preview-panel");let e=null;n&&(e=n.querySelector('a[href$=".pdf"]')||n.querySelector('a[href*=".pdf?"]'));const s=e?e.getAttribute("href"):null;t&&s&&i(t,s),o.addEventListener("click",()=>{if(!t)return;t.classList.toggle("hidden");const c=!t.classList.contains("hidden");o.textContent=c?"Hide preview":"Show preview",typeof clarity=="function"&&clarity("event",c?"pdf_preview_show":"pdf_preview_hide"),typeof gtag=="function"&&gtag("event",c?"pdf_preview_show":"pdf_preview_hide",{event_category:"PDF"}),c&&!t.dataset.pdfLoaded&&s&&i(t,s)})})});
