(function(){"use strict";let i=document.readyState==="complete";i||window.addEventListener("load",function(){i=!0},{once:!0});function f(e){if(i){e();return}window.addEventListener("load",e,{once:!0})}const n="G-MCN4RXCY6Q",d="uawk2g8xee",w=typeof navigator<"u"&&!!navigator.webdriver;let s=!1,o={ga4:!1,clarity:!1,marked:!1};const r=["scroll","mousemove","touchstart","keydown","click"];function l(e,m=!0,y=null){const a=document.createElement("script");a.src=e,a.async=m,y&&(a.onload=y),document.body.appendChild(a)}function c(){if(o.ga4){console.log("[LazyLoader] Google Analytics already initialized, skipping");return}o.ga4=!0,window.dataLayer=window.dataLayer||[];function e(){window.dataLayer.push(arguments)}window.gtag=e,e("js",new Date),e("config",n,{send_page_view:!0,anonymize_ip:!0,allow_google_signals:!1,allow_ad_personalization_signals:!1,cookie_flags:"SameSite=None;Secure"}),l(`https://www.googletagmanager.com/gtag/js?id=${n}`),console.log("[LazyLoader] \u2713 Google Analytics 4 initialized:",n)}function u(){if(o.clarity){console.log("[LazyLoader] Microsoft Clarity already initialized, skipping");return}o.clarity=!0,window.clarity=window.clarity||function(){(window.clarity.q=window.clarity.q||[]).push(arguments)},l(`https://www.clarity.ms/tag/${d}`),console.log("[LazyLoader] \u2713 Microsoft Clarity initialized:",d)}function L(){if(o.marked){console.log("[LazyLoader] Marked.js already loaded, skipping");return}o.marked=!0,l("/assets/vendor/marked.min.js",!0,function(){console.log("[LazyLoader] \u2713 Marked.js loaded for chat markdown parsing")})}function p(){if(s){console.log("[LazyLoader] Scripts already loaded, aborting");return}s=!0,r.forEach(function(e){window.removeEventListener(e,t,{passive:!0,capture:!0}),document.removeEventListener(e,t,{passive:!0,capture:!0})}),console.log("[LazyLoader] \u{1F680} User interaction detected - initializing analytics..."),f(function(){if(L(),w){console.log("[LazyLoader] Automated context detected - skipping analytics");return}"requestIdleCallback"in window?requestIdleCallback(function(){console.log("[LazyLoader] Browser idle - loading analytics..."),c(),u()},{timeout:3e3}):setTimeout(function(){console.log("[LazyLoader] Using setTimeout fallback for analytics..."),c(),u()},100)})}function t(){p()}function g(){if(window.__lazyLoaderInitialized){console.log("[LazyLoader] Already initialized, skipping");return}window.__lazyLoaderInitialized=!0,r.forEach(function(e){window.addEventListener(e,t,{passive:!0,capture:!0,once:!0}),document.addEventListener(e,t,{passive:!0,capture:!0,once:!0})}),console.log("[LazyLoader] \u23F3 Initialized - waiting for user interaction..."),console.log("[LazyLoader] Analytics will load on:",r.join(", "))}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",g):g()})();
