(function(){"use strict";let i=document.readyState==="complete";i||window.addEventListener("load",function(){i=!0},{once:!0});function w(e){if(i){e();return}window.addEventListener("load",e,{once:!0})}const n="G-MCN4RXCY6Q",l="uawk2g8xee";let c=!1,t={ga4:!1,clarity:!1,marked:!1};const r=["scroll","mousemove","touchstart","keydown","click"];function d(e,p=!0,y=null){const a=document.createElement("script");a.src=e,a.async=p,y&&(a.onload=y),document.body.appendChild(a)}function s(){if(t.ga4){console.log("[LazyLoader] Google Analytics already initialized, skipping");return}t.ga4=!0,window.dataLayer=window.dataLayer||[];function e(){window.dataLayer.push(arguments)}window.gtag=e,e("js",new Date),e("config",n,{send_page_view:!0,anonymize_ip:!0,cookie_flags:"SameSite=None;Secure"}),d(`https://www.googletagmanager.com/gtag/js?id=${n}`),console.log("[LazyLoader] \u2713 Google Analytics 4 initialized:",n)}function u(){if(t.clarity){console.log("[LazyLoader] Microsoft Clarity already initialized, skipping");return}t.clarity=!0,window.clarity=window.clarity||function(){(window.clarity.q=window.clarity.q||[]).push(arguments)},d(`https://www.clarity.ms/tag/${l}`),console.log("[LazyLoader] \u2713 Microsoft Clarity initialized:",l)}function f(){if(t.marked){console.log("[LazyLoader] Marked.js already loaded, skipping");return}t.marked=!0,d("https://cdn.jsdelivr.net/npm/marked/marked.min.js",!0,function(){console.log("[LazyLoader] \u2713 Marked.js loaded for chat markdown parsing")})}function L(){if(c){console.log("[LazyLoader] Scripts already loaded, aborting");return}c=!0,r.forEach(function(e){window.removeEventListener(e,o,{passive:!0,capture:!0}),document.removeEventListener(e,o,{passive:!0,capture:!0})}),console.log("[LazyLoader] \u{1F680} User interaction detected - initializing analytics..."),w(function(){f(),"requestIdleCallback"in window?requestIdleCallback(function(){console.log("[LazyLoader] Browser idle - loading analytics..."),s(),u()},{timeout:3e3}):setTimeout(function(){console.log("[LazyLoader] Using setTimeout fallback for analytics..."),s(),u()},100)})}function o(){L()}function g(){if(window.__lazyLoaderInitialized){console.log("[LazyLoader] Already initialized, skipping");return}window.__lazyLoaderInitialized=!0,r.forEach(function(e){window.addEventListener(e,o,{passive:!0,capture:!0,once:!0}),document.addEventListener(e,o,{passive:!0,capture:!0,once:!0})}),console.log("[LazyLoader] \u23F3 Initialized - waiting for user interaction..."),console.log("[LazyLoader] Analytics will load on:",r.join(", "))}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",g):g()})();
