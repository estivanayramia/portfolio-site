(function(){"use strict";const t="G-MCN4RXCY6Q",l="uawk2g8xee";let d=!1,a={ga4:!1,clarity:!1,marked:!1};const n=["scroll","mousemove","touchstart","keydown","click"];function r(e,L=!0,g=null){const o=document.createElement("script");o.src=e,o.async=L,g&&(o.onload=g),document.body.appendChild(o)}function c(){if(a.ga4){console.log("[LazyLoader] Google Analytics already initialized, skipping");return}a.ga4=!0,window.dataLayer=window.dataLayer||[];function e(){window.dataLayer.push(arguments)}window.gtag=e,e("js",new Date),e("config",t,{send_page_view:!0,anonymize_ip:!0,cookie_flags:"SameSite=None;Secure"}),r(`https://www.googletagmanager.com/gtag/js?id=${t}`),console.log("[LazyLoader] \u2713 Google Analytics 4 initialized:",t)}function s(){if(a.clarity){console.log("[LazyLoader] Microsoft Clarity already initialized, skipping");return}a.clarity=!0,window.clarity=window.clarity||function(){(window.clarity.q=window.clarity.q||[]).push(arguments)},r(`https://www.clarity.ms/tag/${l}`),console.log("[LazyLoader] \u2713 Microsoft Clarity initialized:",l)}function y(){if(a.marked){console.log("[LazyLoader] Marked.js already loaded, skipping");return}a.marked=!0,r("https://cdn.jsdelivr.net/npm/marked/marked.min.js",!0,function(){console.log("[LazyLoader] \u2713 Marked.js loaded for chat markdown parsing")})}function w(){if(d){console.log("[LazyLoader] Scripts already loaded, aborting");return}d=!0,n.forEach(function(e){window.removeEventListener(e,i,{passive:!0,capture:!0}),document.removeEventListener(e,i,{passive:!0,capture:!0})}),console.log("[LazyLoader] \u{1F680} User interaction detected - initializing analytics..."),y(),"requestIdleCallback"in window?requestIdleCallback(function(){console.log("[LazyLoader] Browser idle - loading analytics..."),c(),s()},{timeout:3e3}):setTimeout(function(){console.log("[LazyLoader] Using setTimeout fallback for analytics..."),c(),s()},100)}function i(){w()}function u(){if(window.__lazyLoaderInitialized){console.log("[LazyLoader] Already initialized, skipping");return}window.__lazyLoaderInitialized=!0,n.forEach(function(e){window.addEventListener(e,i,{passive:!0,capture:!0,once:!0}),document.addEventListener(e,i,{passive:!0,capture:!0,once:!0})}),console.log("[LazyLoader] \u23F3 Initialized - waiting for user interaction..."),console.log("[LazyLoader] Analytics will load on:",n.join(", "))}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",u):u()})();
